{"version":3,"sources":["components/navBar.js","components/utils/mapFunctions.js","components/utils/constant.js","components/map/pieChart.js","components/map/barChart.js","components/map/treeChart.js","components/map/boxPlot.js","components/map/countryDialog.js","image/wine.svg","components/map/pieMap.js","components/map/map.js","data/sliced.csv","components/radar/radar.js","components/radar/RadarChart.js","data/wine_name_grapes.csv","data/tree.csv","data/wine_radar.csv","components/chord/comparisonRadar.js","components/chord/radial.js","components/chord/radialTree.js","components/chord/radar_style.js","components/network/networkGraph.js","components/network/network.js","App.js","reportWebVitals.js","index.js"],"names":["ListItemLink","props","icon","primary","to","renderLink","React","useMemo","forwardRef","itemProps","ref","ListItem","button","component","ListItemIcon","ListItemText","useStyles","makeStyles","root","width","ListRouter","classes","className","Paper","elevation","List","aria-label","countMap","colorMap","chroma","scale","mode","colors","length","getColor","d","i","mapStyle","feature","fillColor","properties","wine_count","weight","opacity","color","fillOpacity","highlightFeature","e","layer","target","setStyle","L","Browser","ie","opera","edge","bringToFront","colorScale","colorCategory","PieChart","state","outerRadius","innerRadius","createPieChart","bind","this","self","node","data","colorData","type","filter","name","push","select","selectAll","transition","tooltip","d3","append","attr","style","arcGenerator","pieGenerator","padAngle","value","g","l","parseInt","enter","_","on","__data__","duration","html","pageX","pageY","legend","text","height","Component","BarChart","margin","top","right","bottom","left","createBarChart","sort","a","b","count","slice","remove","x","domain","range","padding","y","nice","join","bandwidth","call","tickFormat","tickSizeOuter","ticks","TreeChart","createTreeChart","dx","dy","nodeSize","tree","maxHeight","links","children","source","descendants","parentCallback","depth","clone","lower","BoxPlot","createBoxPlot","rawData","nest","key","type_name","rollup","series","bin","map","values","price","min","max","q1","q2","q3","iqr","r0","Math","r1","quartiles","outliers","v","entries","paddingInner","paddingOuter","groups","random","Transition","Slide","direction","FullScreenDialog","treeCallbackFunction","selectedName","setState","fullData","useData","usePriceData","priceData","region_name","temp","forEach","winery_name","activeData","filter_column","myDiv","createRef","Dialog","fullScreen","open","onClose","closeDialog","TransitionComponent","AppBar","appBar","Toolbar","IconButton","onClick","Typography","variant","title","Grid","container","spacing","item","xs","gridCard","statsHeader","statsContent","winery_count","graphHeader","type_count","grape_count","withStyles","theme","flewGrow","backgroundColor","position","marginLeft","flex","textAlign","paddingTop","marginBottom","palette","secondary","minHeight","withTheme","bakeThePie","options","valueFunc","r","rInner","strokeWidth","pieClass","pathClassFunc","pathTitleFunc","pieLabel","pieLabelClass","origo","w","h","pieData","group","pieMap","svg","document","createElementNS","vis","xmlNode","window","XMLSerializer","serializeToString","xml","serializeXmlNode","countries","require","wine_data","price_data","geo_data","wine_geo","JSON","parse","WineMap","showDialog","admin","Icon","Default","imagePath","openDialog","country_name","geojson","mymap","zoom","center","maxZoom","clickFeature","tileLayer","attribution","accessToken","id","minZoom","addTo","geoJson","onEachFeature","mouseover","mouseout","resetStyle","click","control","onAdd","div","DomUtil","create","grades","innerHTML","markerclusters","markerClusterGroup","maxClusterRadius","iconCreateFunction","cluster","getAllChildMarkers","n","reduce","rmax","iconDim","sum","_leaflet_id","DivIcon","iconSize","Point","markers","pointToLayer","latlng","myIcon","marker","addLayer","beforeAdd","removeControl","zoomLevel","getZoom","console","log","hasLayer","removeLayer","type_id","type_data","1","2","3","4","5","6","innerWidth","innerHeight","labels","type_labels","type_map","radarChartOptions","maxValue","levels","roundStrokes","StyleRadar","originData","then","dataset","parseF","str","parseFloat","scales","sorted","lrange","floor","key_filter","chart_id","style_varietal_name","new_data","tlabels","valid","axis","actValue","cfg","labelFactor","wrapWidth","opacityArea","dotRadius","opacityCircles","allAxis","total","radius","angleSlice","PI","rScale","feMerge","axisGrid","reverse","cos","sin","pie","arc","radarLine","curve","angle","blobWrapper","RadarChart","toElement","block","items","each","getElementsByName","CompareRadar","defs","word","words","split","line","lineNumber","tspan","pop","getComputedTextLength","preventDefault","splice","findIndex","_d","newX","newY","String","mask","drawRadialChart","csvpath","radar_csv","Treedata","curNode","curPath","HAS_CHILDREN_COLOR","SELECTED_COLOR","counter","flag","curX","curY","curR","project","size","separation","parent","svgGroup","event","pathelms","querySelectorAll","classList","sel","shiftKey","selectNode","add","update","parentId","substring","lastIndexOf","stratify","x0","y0","c","children_id","child","collapseTree","nodes","nodeEnter","insert","dblclick","_children","reduceZ","selected","nodeUpdate","merge","delay","abs","nodeExit","exit","link","fullpath","idx","defaultPrevented","pow","color2","radarChartOptions2","RadialTree","dataset_radar","indexByName","Map","nameByIndex","matrix","colores","has","set","data_size","grapes","get","row","Array","from","fill","chord","sortSubgroups","sortChords","ribbon","chords","datum","onMouseOver","index","dataset_tree","target_index","onMouseOut","darker","startAngle","endAngle","svgLegned","keys","key_list","style_name","indexOf","Set","property","styleRadar","md","food_data","food_link","drag","simulation","active","alphaTarget","restart","subject","fx","fy","NetworkGraph","createNetwork","Object","force","strength","__proto__","sqrt","gNode","image","imageRadius","clickEvent","neighbors","mouseOverEvent","mouseOutEvent","mouseMoveEvent","wine","wineColor","wineLegend","foodColor","foodLegend","FoodNetwork","dimensions","offsetWidth","offsetHeight","el","renderContent","display","toolbar","paddingRight","toolbarIcon","alignItems","justifyContent","mixins","zIndex","drawer","transitions","easing","sharp","leavingScreen","appBarShift","enteringScreen","menuButton","marginRight","menuButtonHidden","flexGrow","drawerPaper","whiteSpace","drawerPaperClose","overflowX","breakpoints","up","appBarSpacer","content","overflow","paddingBottom","paper","flexDirection","fixedHeight","App","useState","setOpen","clsx","CssBaseline","initialEntries","initialIndex","noWrap","Drawer","Divider","Container","maxWidth","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.96132edc.chunk.js","sourcesContent":["import React from 'react';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport List from '@material-ui/core/List';\nimport '../css/iconfont.css'\nimport {Link as RouterLink} from 'react-router-dom';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport PropTypes from 'prop-types';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\n\nfunction ListItemLink(props) {\n    const {icon, primary, to} = props;\n\n    const renderLink = React.useMemo(\n        () => React.forwardRef((itemProps, ref) => <RouterLink to={to} ref={ref} {...itemProps} />),\n        [to],\n    );\n\n    return (\n        <li>\n            <ListItem button component={renderLink}>\n                {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\n                <ListItemText primary={primary}/>\n            </ListItem>\n        </li>\n    );\n}\n\nListItemLink.propTypes = {\n    icon: PropTypes.element,\n    primary: PropTypes.string.isRequired,\n    to: PropTypes.string.isRequired,\n};\n\nconst useStyles = makeStyles({\n    root: {\n        width: 250,\n    },\n});\n\nexport default function ListRouter() {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <Paper elevation={0}>\n                <List aria-label=\"main\">\n                    <ListItemLink to=\"/map\" primary=\"Wine Map\" icon={<i className=\"iconfont icon-map\"/>}/>\n                    <ListItemLink to=\"/radar\" primary=\"Taste Radar\" icon={<i className=\"iconfont icon-radar\"/>}/>\n                    <ListItemLink to=\"/tree\" primary=\"Grape-Style Chord\" icon={<i className=\"iconfont icon-tp_radial\"/>}/>\n                    <ListItemLink to=\"/network\" primary=\"Food Pair Network\" icon={<i className=\"iconfont icon-network1\"/>}/>\n                </List>\n            </Paper>\n        </div>\n    );\n}\n\n","import L from \"leaflet\";\nimport chroma from 'chroma-js'\nimport React from \"react\";\n\nexport const countMap = [100, 500, 1000, 3000, 5000, 10000, 20000, 30000, 40000];\nexport const colorMap = chroma.scale(['#f5e6e8', '#380024']).mode('lch').colors(countMap.length);\n\nexport function getColor(d) {\n    if (d) {\n        for (let i = 0; i < countMap.length; i++) {\n            if (d <= countMap[i]) return colorMap[i];\n        }\n    } else {\n        return '#D3D3D3'\n    }\n}\n\nexport function mapStyle(feature) {\n    return {\n        fillColor: getColor(feature.properties.wine_count),\n        weight: 1,\n        opacity: 0.4,\n        color: 'black',\n        fillOpacity: 0.8\n    }\n}\n\nexport function highlightFeature(e) {\n    var layer = e.target;\n\n    layer.setStyle({\n        weight: 3,\n        color: 'black',\n        fillOpacity: 1\n    });\n\n    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {\n        layer.bringToFront();\n    }\n}\n\n\n","export const colorScale = {\n    'Red': 'rgba(177,18,38,0.73)', 'White': '#e4b953', 'Sparkling': '#898ebe',\n    'Rose': '#ffb6c1', 'Dessert': '#edec7f', 'Fortified': '#722f37'\n    // 'Red': '#ab3a3e', 'White': '#e4b953', 'Sparkling': '#898ebe',\n    // 'Rose': '#b68189', 'Dessert': '#6188a7', 'Fortified': '#6f5268'\n};\n\nexport const colorCategory = {\n    'Meat': '#f9594f',\n    'Seafood': '#3399FF',\n    'Cheese': '#FFA600',\n    'Dessert': '#f6dea7',\n    'Vegetable & Others': '#a5eec4'\n};\n\n","import React, {Component} from 'react'\nimport {select} from 'd3-selection'\nimport '../../css/pieChart.css'\nimport * as d3 from 'd3';\nimport {colorScale} from '../utils/constant'\n\nexport default class PieChart extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            outerRadius: 100,\n            innerRadius: 40\n        }\n\n        this.createPieChart = this.createPieChart.bind(this)\n        const margin = {\n            top: 50, right: 50, bottom: 50, left: 50,\n        };\n\n    }\n\n    componentDidMount() {\n        this.createPieChart()\n    }\n\n    componentDidUpdate() {\n        this.createPieChart()\n    }\n\n    createPieChart() {\n        const self = this;\n        const node = this.node;\n        const data = this.props.data;\n        const width = self.props.width;\n\n        if (data) {\n            let colorData = [];\n            for (let type in colorScale) {\n                if (data.filter(d => d.name === type).length > 0) colorData.push({\n                    'name': type,\n                    'color': colorScale[type]\n                });\n            }\n\n            select(node).selectAll('*').transition();\n\n            const tooltip = d3.select('div.FullScreenDialog-root-17')\n                .append(\"div\")\n                .attr(\"class\", \"tooltip\")\n                .style(\"opacity\", 0);\n\n            const arcGenerator = d3\n                .arc()\n                .innerRadius(self.state.innerRadius)\n                .outerRadius(self.state.outerRadius);\n\n            const pieGenerator = d3\n                .pie()\n                .padAngle(0)\n                .value((d) => d.value);\n\n            const g = select(node)\n                .append('g')\n                .attr('transform', `translate(120, 100)`);\n\n            const l = select(node)\n                .append('g')\n                .attr('transform', `translate(${parseInt(width) - 70}, 40)`);\n\n            const arc = g\n                .selectAll()\n                .data(pieGenerator(data))\n                .enter();\n\n            const mouseOverEvent = d => {\n                const data = d.target.__data__.data;\n                tooltip.transition()\n                    .duration(100)\n                    .style(\"opacity\", .8);\n                tooltip.html(\"<p>Name: \" + data.name + \"</p> <p> Wine Count: \" + data.value  + \"</p>\")\n                    .style(\"left\", () => d.pageX + 'px')\n                    .style(\"top\", () => d.pageY + 'px');\n            };\n\n            const mouseOutEvent = () => {\n                tooltip.transition()\n                    .duration(100)\n                    .style(\"opacity\", 0);\n            };\n\n            const mouseMoveEvent = d => {\n                tooltip.style(\"left\", (d.pageX) + \"px\")\n                    .style(\"top\", (d.pageY) + \"px\");\n            };\n\n            arc.append('path')\n                .attr('d', arcGenerator)\n                .style('fill', (i, _) => colorScale[i.data.name])\n                .style('stroke', '#474747')\n                .style('stroke-width', 1)\n                .style('stroke-opacity', 0.6)\n                .on('mouseover.tooltip', mouseOverEvent)\n                .on(\"mouseout.tooltip\", mouseOutEvent)\n                .on(\"mousemove\", mouseMoveEvent);\n\n\n            const legend = l.selectAll('.chart-legend')\n                .data(colorData)\n                .enter()\n                .append('g')\n                .attr('class', 'chart-legend')\n                .attr('transform', (_, i) => `translate(0, ${i * 20})`)\n            ;\n\n            legend.append('rect')\n                .attr('width', 10)\n                .attr('height', 10)\n                .attr('stroke', 'black')\n                .style('stroke-width', 0.5)\n                .style('fill', d => d.color)\n            ;\n\n            legend.append('text')\n                .attr('x', 15)\n                .attr('y', 8)\n                .attr('font-size', 10)\n                .text(d => d.name)\n            ;\n        }\n\n    }\n\n    render() {\n        return <svg ref={node => this.node = node} data={this.props.data}\n                    width={this.props.width} height={this.props.height}>\n        </svg>\n    }\n}\n\n","import React, {Component} from 'react'\nimport {select} from 'd3-selection'\nimport * as d3 from 'd3';\nimport { colorScale } from '../utils/constant'\n\nexport default class BarChart extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            outerRadius: 100,\n            innerRadius: 10,\n            margin : {\n                top: 15, right: 20, bottom: 20, left: 40,\n            }\n        }\n\n        this.createBarChart = this.createBarChart.bind(this)\n        // const width = 2 * this.state.outerRadius + margin.left + margin.right;\n        // const height = 2 * this.state.outerRadius + margin.top + margin.bottom;\n\n\n    }\n\n    componentDidMount() {\n        this.createBarChart()\n    }\n\n    componentDidUpdate() {\n        this.createBarChart()\n    }\n\n    createBarChart() {\n        const self = this;\n        const node = this.node;\n        const data = self.props.data.sort((a, b) => b.count - a.count).slice(0, 5);\n        const margin = this.state.margin;\n        const width = self.props.width;\n        const height = self.props.height;\n\n        if (data) {\n            select(node).selectAll('*').remove()\n\n            const x = d3.scaleBand()\n                .domain(d3.range(data.length))\n                .range([margin.left, width - margin.right])\n                .padding(0.1);\n\n            const y = d3.scaleLinear()\n                .domain([0, d3.max(data, d => d.count)]).nice()\n                .range([height - margin.bottom, margin.top]);\n\n            const xAxis = g => g\n                .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n                .call(d3.axisBottom(x).tickFormat(i => data[i].name).tickSizeOuter(0));\n\n            const yAxis = g => g\n                .attr(\"transform\", `translate(${margin.left},0)`)\n                .call(d3.axisLeft(y).ticks(5))\n                .call(g => g.append(\"text\")\n                    .attr(\"x\", -margin.left)\n                    .attr(\"y\", 10)\n                    .attr(\"fill\", \"currentColor\")\n                    .attr(\"text-anchor\", \"start\")\n                    .text(data.y));\n\n            const g = select(node)\n                .append('g');\n\n            g.append(\"g\")\n                .selectAll(\"rect\")\n                .data(data)\n                .join(\"rect\")\n                .attr(\"fill\", \"#ddabae\")\n                .attr(\"x\", (d, i) => x(i))\n                .attr(\"y\", d => y(d.count))\n                .attr(\"height\", d => y(0) - y(d.count))\n                .attr(\"width\", x.bandwidth())\n                .attr('stroke', 'black');\n\n            g.append(\"g\")\n                .call(xAxis)\n                .selectAll(\"text\")\n                .attr(\"font-size\", 8.5)\n\n            g.append(\"g\")\n                .call(yAxis);\n\n            g.append(\"text\")\n                .attr(\"text-anchor\", \"start\")\n                .attr('font-size', '10px')\n                .attr(\"x\", 0)\n                .attr(\"y\", margin.top - 4)\n                .text(\"Number of Wines\")\n        }\n\n\n        // arc.append('text')\n        //     .attr('text-anchor', 'middle')\n        //     .attr('alignment-baseline', 'middle')\n        //     .text((d) => d.data.name)\n        //     .attr('font-size', 15)\n        //     .style('fill', '#ffffff')\n        //     .attr('transform', (d) => {\n        //         const [x, y] = arcGenerator.centroid(d);\n        //         return `translate(${x}, ${y})`;\n        //     });\n\n    }\n\n    render() {\n        return <svg ref={node => this.node = node}\n                    width={this.props.width} height={this.props.height}>\n        </svg>\n    }\n}\n\n","import React, {Component} from 'react'\nimport {select} from 'd3-selection'\nimport * as d3 from 'd3';\nimport { colorScale } from '../utils/constant'\nimport '../../css/treeChart.css'\n\nexport default class TreeChart extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            outerRadius: 100,\n            innerRadius: 10,\n\n        }\n\n        this.createTreeChart = this.createTreeChart.bind(this)\n        // const width = 2 * this.state.outerRadius + margin.left + margin.right;\n        // const height = 2 * this.state.outerRadius + margin.top + margin.bottom;\n\n\n    }\n\n    componentDidMount() {\n        this.createTreeChart()\n    }\n\n    componentDidUpdate() {\n        this.createTreeChart()\n    }\n\n    createTreeChart() {\n        const self = this;\n        const node = this.node;\n        const data = self.props.data;\n        const width = self.props.width - 100;\n        const margin = {\n            top: 40, right: 20, bottom: 20, left: 50,\n        }\n\n        if (data) {\n            select(node).selectAll('*').remove()\n\n            const tree = data => {\n                const root = d3.hierarchy(data).sort((a, b) => {\n                    d3.descending(a.height, b.height) || d3.ascending(a.data.name, b.data.name)\n                });\n                root.dx = 10;\n                root.dy = width / (root.height + 1);\n                return d3.cluster().nodeSize([root.dx, root.dy])(root);\n            };\n\n            const root = tree(data);\n\n            const maxHeight = -root.links()[0].target.children[0].x + margin.top ;\n\n            const g = select(node).append('g')\n                .attr('transform', `translate(150, ${maxHeight})`);\n\n            g.append(\"g\")\n                .attr(\"fill\", \"none\")\n                .attr(\"stroke\", \"#555\")\n                .attr(\"stroke-opacity\", 0.4)\n                .attr(\"stroke-width\", 1.5)\n                .selectAll(\"path\")\n                .data(root.links())\n                .join(\"path\")\n                .attr(\"d\", d => `\n        M${d.target.y},${d.target.x}\n        C${d.source.y + root.dy / 2},${d.target.x}\n         ${d.source.y + root.dy / 2},${d.source.x}\n         ${d.source.y},${d.source.x}\n      `);\n\n            g.append(\"g\")\n                .selectAll(\"circle\")\n                .data(root.descendants())\n                .join(\"circle\")\n                .attr('class', 'treeNode')\n                .attr(\"cx\", d => d.y)\n                .attr(\"cy\", d => d.x)\n                .attr(\"fill\", d => d.children ? \"#920036\" : \"#722f37\")\n                .attr(\"stroke\", 'black')\n                .attr(\"stroke-width\", 1)\n                .attr(\"r\", 3.5)\n                .attr(\"opacity\", d => d.data.name === self.props.name? 1 : 0.4)\n                .on('click', (_, d)=> self.props.parentCallback(d.data.name, d.depth));\n\n            g.append(\"g\")\n                .attr(\"font-family\", \"sans-serif\")\n                .attr(\"font-size\", 10)\n                .attr(\"stroke-linejoin\", \"round\")\n                .attr(\"stroke-width\", 3)\n                .selectAll(\"text\")\n                .data(root.descendants())\n                .join(\"text\")\n                .attr(\"x\", d => d.y)\n                .attr(\"y\", d => d.x)\n                .attr(\"dy\", \"0.31em\")\n                .attr(\"dx\", d => d.children ? -6 : 6)\n                .text(d => d.data.name)\n                .filter(d => d.children)\n                .attr(\"text-anchor\", \"end\")\n                .clone(true).lower()\n                .attr(\"stroke\", \"white\");\n        }\n\n\n    }\n\n    render() {\n        return <svg ref={node => this.node = node}\n                    width={this.props.width} height={this.props.height}>\n        </svg>\n    }\n}\n\n","import React, {Component} from 'react'\nimport {select} from 'd3-selection'\nimport '../../css/pieChart.css'\nimport * as d3 from 'd3';\nimport {colorScale} from '../utils/constant'\nimport {nest} from 'd3-collection'\nimport _, { map } from 'underscore'\n\nexport default class BoxPlot extends Component {\n    constructor(props) {\n        super(props)\n        this.createBoxPlot = this.createBoxPlot.bind(this)\n    }\n\n    componentDidMount() {\n        this.createBoxPlot()\n    }\n\n    componentDidUpdate() {\n        this.createBoxPlot()\n    }\n\n    createBoxPlot() {\n        const self = this;\n        const node = this.node;\n        const rawData = this.props.data\n        const width = self.props.width;\n        const height = self.props.height - 200;\n        const margin = ({top: 50, right: 20, bottom: 30, left: 60})\n\n        if (rawData) {\n            select(node).selectAll('*').remove()\n\n            const data = nest()\n                .key(function (d) {\n                    return d.type_name;\n                })\n                .rollup(function (series) {\n                    const bin = series.map(d => d);\n                    const values = series.map(d => d.price);\n                    values.sort((a, b) => a - b);\n                    const min = values[0];\n                    const max = values[values.length - 1];\n                    const q1 = d3.quantile(values, 0.25);\n                    const q2 = d3.quantile(values, 0.50);\n                    const q3 = d3.quantile(values, 0.75);\n                    const iqr = q3 - q1; // interquartile range\n                    const r0 = Math.max(min, q1 - iqr * 1.5);\n                    const r1 = Math.min(max, q3 + iqr * 1.5);\n                    bin.quartiles = [q1, q2, q3];\n                    bin.range = [r0, r1];\n                    bin.outliers = bin.filter(v => v.price < 10 || v.price > 1000); // TODO\n                    return bin;\n                })\n                .entries(rawData);\n\n\n            const x = d3.scaleBand()\n                .range([margin.left, width - margin.right])\n                .domain(data.map(d => d.key))\n                .paddingInner(1)\n                .paddingOuter(.5)\n\n            const y = d3.scaleLinear()\n                .domain([d3.min(rawData, d => d.price), Math.min(d3.max(rawData, d => d.price), 300)]).nice()\n                .range([height - margin.bottom, margin.top])\n\n            const xAxis = g => g\n                .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n                .call(d3.axisBottom(x).ticks(4).tickSizeOuter(0))\n\n            const yAxis = g => g\n                .attr(\"transform\", `translate(${margin.left},0)`)\n                .call(d3.axisLeft(y).ticks(null, \"s\"))\n                .call(g => g.select(\".domain\").remove())\n\n            const boxWidth = 50;\n            const jitterWidth = 40;\n\n            const groups = select(node).selectAll(\"g\")\n                .data(data)\n                .join(\"g\")\n                .attr(\"transform\", d => `translate(${x(d.key)}, 0)`)\n                .attr(\"class\", d => d.key);\n\n\n            groups\n                .selectAll(\"vertLine\")\n                .data(d => [d.value.range])\n                .join(\"line\")\n                .attr(\"class\", \"vertLine\")\n                .attr(\"stroke\", \"#C0C0C0\")\n                .attr('stroke-width', '1px')\n                .style(\"width\", 40)\n                .attr(\"x1\", 0)\n                .attr(\"x2\", 0)\n                .attr(\"y1\", range => y(range[0]))\n                .attr(\"y2\", range => y(range[1]));\n\n            groups\n                .selectAll(\"points\")\n                .data(d => {\n                    return (d.value.filter(v => v.price < 300 || !('price' in v)).slice(0, 200))\n                    console.log(_.sampleSize([1,2,3,4,5], 3))\n                    if (d.value.length > 200) {\n                        return d.value.slice(0, 200);\n                    } else return d.value;\n                    // _.sample(d.value.filter(v => v.price < 300), 200)\n                })\n                .join(\"circle\")\n                .attr(\"cx\", d => 0 - jitterWidth / 2 + Math.random() * jitterWidth)\n                .attr(\"cy\", d => y(d.price))\n                .attr(\"r\", 2)\n                .style(\"fill\", d => colorScale[d.type_name])\n                .attr(\"fill-opacity\", 0.9);\n\n            groups\n                .selectAll(\"box\")\n                .data(d => [d])\n                .join(\"rect\")\n                .attr(\"class\", \"box\")\n                .attr(\"x\", -boxWidth / 2)\n                .attr(\"y\", d => y(d.value.quartiles[2]))\n                .attr(\"height\", d => y(d.value.quartiles[0]) - y(d.value.quartiles[2]))\n                .attr(\"width\", boxWidth)\n                .attr(\"stroke\", \"#808080\")\n                .style(\"fill\", d=>colorScale[d.key])\n                .style(\"fill-opacity\", 0.6);\n\n            groups\n                .selectAll(\"horizontalLine\")\n                .data(d => [d.value.range[0], d.value.quartiles[1], d.value.range[1]])\n                .join(\"line\")\n                .attr(\"class\", \"horizontalLine\")\n                .attr(\"stroke\", \"#808080\")\n                .attr('stroke-width', '1px')\n                .style(\"width\", 40)\n                .attr(\"x1\", -boxWidth / 2)\n                .attr(\"x2\", +boxWidth / 2)\n                .attr(\"y1\", d => y(d))\n                .attr(\"y2\", d => y(d));\n\n\n            select(node).append(\"g\")\n                .call(xAxis);\n\n            select(node).append(\"g\")\n                .call(yAxis)\n        }\n    }\n\n    render() {\n        return <svg ref={node => this.node = node} data={this.props.data}\n                    width={this.props.width} height={this.props.height}>\n        </svg>\n    }\n}\n\n","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport {withStyles} from \"@material-ui/core/styles\";\nimport Slide from '@material-ui/core/Slide';\nimport Grid from '@material-ui/core/Grid'\nimport Paper from '@material-ui/core/Paper';\nimport PieChart from './pieChart'\nimport BarChart from './barChart'\nimport TreeChart from './treeChart'\nimport BoxPlot from './boxPlot'\n\nconst styles = (theme) => ({\n    root: {\n        flewGrow: 1\n    },\n    appBar: {\n        backgroundColor: '#722f37',\n        position: 'relative',\n    },\n    title: {\n        marginLeft: theme.spacing(2),\n        flex: 1,\n    },\n    statsHeader: {\n        textAlign: 'center',\n        color: '#480027',\n        paddingTop: '20px',\n        marginBottom: '50px'\n    },\n    graphHeader: {\n        textAlign: 'center',\n        color: '#480027',\n        marginBottom: '8px'\n    },\n    statsContent: {\n        color: '#920036'\n    },\n    gridCard: {\n        marginLeft:'20px',\n        textAlign: 'center',\n        color: theme.palette.text.secondary,\n        minHeight: '250px',\n    }\n\n});\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\n\nclass FullScreenDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            fullData: this.props.activeData,\n            useData: this.props.activeData,\n            priceData: this.props.priceData,\n            filter: this.props.activeData.name,\n            filter_column: 'country_name',\n            usePriceData: this.props.priceData\n        }\n        this.treeCallbackFunction = this.treeCallbackFunction.bind(this)\n        this.myDiv = React.createRef()\n    }\n\n    componentDidUpdate() {\n        const self = this;\n        if (self.state.fullData !== self.props.activeData) {\n            self.setState({\n                fullData: self.props.activeData, useData: self.props.activeData, priceData:\n                self.props.priceData, filter: this.props.activeData.name, usePriceData: self.props.priceData\n            });\n        }\n    }\n\n    treeCallbackFunction = (selectedName, depth) => {\n        if (this.state.filter === selectedName || depth === 0) {\n            this.setState({\n                filter: this.state.fullData.name,\n                useData: this.state.fullData,\n                usePriceData: this.state.priceData\n            })\n        } else {\n            var data;\n            if (depth === 1) {\n                data = this.state.fullData.children.filter(d => d.name === selectedName);\n                this.setState({usePriceData: this.state.priceData.filter(d => d.region_name === selectedName)})\n            } else {\n                let temp = [];\n                this.state.fullData.children.forEach(d => temp.push(...d.children));\n                data = temp.filter(d => d.name === selectedName)\n                this.setState({usePriceData: this.state.priceData.filter(d => d.winery_name === selectedName)})\n            }\n            this.setState({filter: selectedName, useData: data[0]})\n        }\n    };\n\n    render() {\n        const {classes} = this.props;\n        return (\n            <div ref={this.myDiv}>\n                <Dialog fullScreen open={this.props.open} onClose={this.props.closeDialog}\n                        TransitionComponent={Transition}>\n                    <AppBar className={classes.appBar}>\n                        <Toolbar>\n                            <IconButton edge=\"start\" color=\"inherit\" onClick={this.props.closeDialog}\n                                        aria-label=\"close\">\n                                <CloseIcon/>\n                            </IconButton>\n                            <Typography variant=\"h6\" className={classes.title}>\n                                {this.props.properties.name}\n                            </Typography>\n                        </Toolbar>\n                    </AppBar>\n                    <div className={classes.root}>\n                        <Grid container spacing={3}>\n                            <Grid item xs>\n                                <Paper className={classes.gridCard}>\n                                    <h1 className={classes.statsHeader}>Number of Wineries</h1>\n                                    <h1 className={classes.statsContent}>{this.state.useData.winery_count || 1}</h1>\n                                </Paper>\n                            </Grid>\n                            <Grid item xs>\n                                <Paper className={classes.gridCard}>\n                                    <h1 className={classes.statsHeader}>Number of Wines</h1>\n\n                                    <h1 className={classes.statsContent}>{this.state.useData.wine_count}</h1>\n                                </Paper>\n                            </Grid>\n                            <Grid item xs>\n                                <h1 className={classes.graphHeader}>Wine Type</h1>\n                                <PieChart data={this.state.useData.type_count} width='300' height='250'/>\n                            </Grid>\n                            <Grid item xs>\n                                <h1 className={classes.graphHeader}>Top 5 Popular Grape Type</h1>\n                                <BarChart data={this.state.useData.grape_count} width='400' height='220'/>\n                            </Grid>\n                        </Grid>\n                        <Grid container spacing={3}>\n                            <Grid item xs>\n                                <h1 className={classes.graphHeader}>Winery Dendrogram</h1>\n                                <TreeChart data={this.state.fullData} width='1000' height='1000'\n                                           name={this.state.filter}\n                                           parentCallback={this.treeCallbackFunction}/>\n                            </Grid>\n                            <Grid item xs>\n                                <h1 className={classes.graphHeader}> Price Boxplot</h1>\n                                <BoxPlot width='400' height='600' data={this.state.usePriceData}/>\n                            </Grid>\n                        </Grid>\n                    </div>\n                </Dialog>\n            </div>\n        );\n    }\n\n}\n\nexport default withStyles(styles, {withTheme: true})(FullScreenDialog);\n","export default __webpack_public_path__ + \"static/media/wine.70ecc137.svg\";","import L from 'leaflet'\nimport * as d3 from 'd3';\nimport 'leaflet.markercluster';\nimport {colorScale} from \"../utils/constant\";\n\n\n// var geojson,\n//     metadata,\n//     geojsonPath = 'traffic_accidents.geojson',\n//     categoryField = '5074', //This is the fieldname for marker category (used in the pie and legend)\n//     iconField = '5065', //This is the fieldame for marker icon\n//     popupFields = ['5065','5055','5074'], //Popup will display these fields\n//     tileServer = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n//     tileAttribution = 'Map data: <a href=\"http://openstreetmap.org\">OSM</a>',\n//     rmax = 30, //Maximum radius for cluster pies\n//     markerclusters = L.markerClusterGroup({\n//         maxClusterRadius: 2*rmax,\n//         iconCreateFunction: defineClusterIcon //this is where the magic happens\n//     }),\n//     map = L.map('map').setView([59.95, 10.78], 8);\n//\n// //Add basemap\n// L.tileLayer(tileServer, {attribution: tileAttribution,  maxZoom: 15}).addTo(map);\n// //and the empty markercluster layer\n// map.addLayer(markerclusters);\n//\n// //Ready to go, load the geojson\n// export function pieMap(geojsonPath) {\n//     d3.json(geojsonPath, function (error, data) {\n//         if (!error) {\n//             console.log(data)\n//             geojson = data;\n//             metadata = data.properties;\n//             var markers = L.geoJson(geojson, {\n//                 pointToLayer: defineFeature,\n//                 onEachFeature: defineFeaturePopup\n//             });\n//             markerclusters.addLayer(markers);\n//             map.fitBounds(markers.getBounds());\n//             map.attributionControl.addAttribution(metadata.attribution);\n//             renderLegend();\n//         } else {\n//             console.log('Could not load data...');\n//         }\n//     });\n// }\n//\n// function defineFeature(feature, latlng) {\n//     var myIcon = {\n//         iconSize: [12, 12]\n//     };\n//     return L.marker(latlng, {iconUrl: '../image/wine.svg', iconSize: [12, 12]});\n// }\n//\n// function defineFeaturePopup(feature, layer) {\n//     var props = feature.properties,\n//         fields = metadata.fields,\n//         popupContent = '';\n//\n//     popupFields.map( function(key) {\n//         if (props[key]) {\n//             var val = props[key],\n//                 label = fields[key].name;\n//             if (fields[key].lookup) {\n//                 val = fields[key].lookup[val];\n//             }\n//             popupContent += '<span class=\"attribute\"><span class=\"label\">'+label+':</span> '+val+'</span>';\n//         }\n//     });\n//     popupContent = '<div class=\"map-popup\">'+popupContent+'</div>';\n//     layer.bindPopup(popupContent,{offset: L.point(1,-2)});\n// }\n\n// function defineClusterIcon(cluster) {\n//     var children = cluster.getAllChildMarkers(),\n//         n = children.length, //Get number of markers in cluster\n//         strokeWidth = 1, //Set clusterpie stroke width\n//         r = rmax-2*strokeWidth-(n<10?12:n<100?8:n<1000?4:0), //Calculate clusterpie radius...\n//         iconDim = (r+strokeWidth)*2, //...and divIcon dimensions (leaflet really want to know the size)\n//         data = d3.group() //Build a dataset for the pie chart\n//             .key(function(d) { return d.feature.properties[categoryField]; })\n//             .entries(children, d3.map),\n//         //bake some svg markup\n//         html = bakeThePie({data: data,\n//             valueFunc: function(d){return d.values.length;},\n//             strokeWidth: 1,\n//             outerRadius: r,\n//             innerRadius: r-10,\n//             pieClass: 'cluster-pie',\n//             pieLabel: n,\n//             pieLabelClass: 'marker-cluster-pie-label',\n//             pathClassFunc: function(d){return \"category-\"+d.data.key;},\n//             pathTitleFunc: function(d){return metadata.fields[categoryField].lookup[d.data.key]+' ('+d.data.values.length+' accident'+(d.data.values.length!=1?'s':'')+')';}\n//         }),\n//         //Create a new divIcon and assign the svg markup to the html property\n//         myIcon = new L.DivIcon({\n//             html: html,\n//             className: 'marker-cluster',\n//             iconSize: new L.Point(iconDim, iconDim)\n//         });\n//     return myIcon;\n// }\n\n/*function that generates a svg markup for the pie chart*/\nexport function bakeThePie(options) {\n    /*data and valueFunc are required*/\n    if (!options.data || !options.valueFunc) {\n        return '';\n    }\n    var data = options.data,\n        valueFunc = options.valueFunc,\n        r = options.outerRadius?options.outerRadius:28, //Default outer radius = 28px\n        rInner = options.innerRadius?options.innerRadius:r-10, //Default inner radius = r-10\n        strokeWidth = options.strokeWidth?options.strokeWidth:1, //Default stroke is 1\n        pathClassFunc = options.pathClassFunc?options.pathClassFunc:function(){return '';}, //Class for each path\n        pathTitleFunc = options.pathTitleFunc?options.pathTitleFunc:function(){return '';}, //Title for each path\n        pieClass = options.pieClass?options.pieClass:'marker-cluster-pie', //Class for the whole pie\n        pieLabel = options.pieLabel?options.pieLabel:d3.sum(data,valueFunc), //Label for the whole pie\n        pieLabelClass = options.pieLabelClass?options.pieLabelClass:'marker-cluster-pie-label',//Class for the pie label\n        origo = (r+strokeWidth), //Center coordinate\n        w = origo*2, //width and height of the svg element\n        h = w\n        // donut = d3.pie(),\n        // arc = d3.arc().innerRadius(rInner).outerRadius(r);\n\n    var pieData = [];\n    if (options.group !== 0) {\n        var pieMap = {};\n        for (const [key, value] of data.entries()) {\n            const type_count = value[0].feature.properties.type_count;\n            type_count.forEach(d => {\n                const name = d.name;\n                if (name in pieMap) pieMap[name]['value'] += d.value;\n                else pieMap[name] = {\"name\": name, \"value\": d.value};\n            })\n        }\n        for (const v in pieMap) {\n            pieData.push(pieMap[v]);\n        }\n    }\n    else {\n        pieData = data.properties.type_count\n    }\n\n    //Create an svg element\n    var svg = document.createElementNS(d3.namespace.svg, 'svg');\n    //Create the pie chart\n    var vis = d3.select(svg)\n        .data([data])\n        .attr('class', pieClass)\n        .attr('width', w)\n        .attr('height', h);\n\n    const arcGenerator = d3\n        .arc()\n        .innerRadius(rInner)\n        .outerRadius(r);\n\n    const pieGenerator = d3\n        .pie()\n        .padAngle(0)\n        .value((d) => d.value);\n\n    const g = vis\n        .append('g')\n        .attr('transform', `translate(${origo}, ${origo})`);\n\n    const pieArc = g\n        .selectAll()\n        .data(pieGenerator(pieData))\n        .enter();\n\n    const slices = pieArc.append('path')\n        .attr('d', arcGenerator)\n        .attr('fill', (i, _) => colorScale[i.data.name])\n        .attr('stroke-width', 1)\n        // .style('fill', (i, _) => colorScale[i.data.name])\n        // .style('stroke', d => console.log(d))\n        // .style('stroke-width', 1)\n        // .style('stroke-opacity', 0.6)\n\n\n    // var arcs = vis.selectAll('g.arc')\n    //     .data(donut.value(valueFunc))\n    //     .enter().append('svg:g')\n    //     .attr('class', 'arc')\n    //     .attr('transform', 'translate(' + origo + ',' + origo + ')');\n    //\n    // arcs.append('svg:path')\n    //     .attr('class', pathClassFunc)\n    //     .attr('stroke-width', strokeWidth)\n    //     .attr('d', arc)\n    //     .append('svg:title')\n    //     .text(pathTitleFunc);\n\n    vis.append('text')\n        .attr('x',origo)\n        .attr('y',origo)\n        .attr('class', pieLabelClass)\n        .attr('text-anchor', 'middle')\n        //.attr('dominant-baseline', 'central')\n        /*IE doesn't seem to support dominant-baseline, but setting dy to .3em does the trick*/\n        .attr('font-weight', 300 + 500 * Math.min(Math.max(0, pieLabel / 4000), 1))\n        .attr('dy','.3em')\n        .text(pieLabel);\n    //Return the svg-markup rather than the actual element\n    return serializeXmlNode(svg);\n}\n\n/*Function for generating a legend with the same categories as in the clusterPie*/\n// function renderLegend() {\n//     var data = metadata.fields[categoryField].entries,\n//         legenddiv = d3.select('body').append('div')\n//             .attr('id','legend');\n//\n//     var heading = legenddiv.append('div')\n//         .classed('legendheading', true)\n//         .text(metadata.fields[categoryField].name);\n//\n//     var legenditems = legenddiv.selectAll('.legenditem')\n//         .data(data);\n//\n//     legenditems\n//         .enter()\n//         .append('div')\n//         .attr('class',function(d){return 'category-'+d.key;})\n//         .classed({'legenditem': true})\n//         .text(function(d){return d.value;});\n// }\n//\n// /*Helper function*/\nfunction serializeXmlNode(xmlNode) {\n    if (typeof window.XMLSerializer != \"undefined\") {\n        return (new window.XMLSerializer()).serializeToString(xmlNode);\n    } else if (typeof xmlNode.xml != \"undefined\") {\n        return xmlNode.xml;\n    }\n    return \"\";\n}\n","import React from 'react'\nimport L from 'leaflet'\nimport '../../css/map.css'\nimport 'leaflet/dist/leaflet.css'\nimport {colorMap, countMap, getColor, highlightFeature, mapStyle} from \"../utils/mapFunctions\";\nimport FullScreenDialog from './countryDialog'\nimport wineIcon from '../../image/wine.svg';\nimport 'leaflet.markercluster';\nimport {bakeThePie} from \"./pieMap\";\nimport 'leaflet.markercluster/dist/MarkerCluster.css'\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css'\nimport * as d3 from \"d3\";\n\nconst countries = require('../../data/countries.geo.json');\nconst wine_data = require('../../data/wine_data.json');\nconst price_data = require('../../data/wine_price.json');\nconst geo_data = require('../../data/wine_geo.json');\n\nconst wine_geo = JSON.parse(geo_data);\n\nexport default class WineMap extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showDialog: false,\n            properties: {admin: ''},\n            activeData: [],\n            priceData: []\n        }\n        L.Icon.Default.imagePath = 'images/';\n        this.openDialog = this.openDialog.bind(this);\n        this.closeDialog = this.closeDialog.bind(this);\n    }\n\n    openDialog(properties) {\n        this.setState({\n            showDialog: true,\n            properties: properties,\n            activeData: wine_data.filter(d => d.name === properties.name)[0],\n            priceData: price_data.filter(d => d.country_name === properties.name)\n        });\n    }\n\n    closeDialog() {\n        this.setState({showDialog: false})\n    }\n\n    componentDidMount() {\n        let self = this;\n\n        // Choropleth map layer\n        const mymap = L.map('mapid', {zoom: 3, center: [46, 1], maxZoom: 13});\n        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\n            attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n            accessToken: 'pk.eyJ1Ijoiampib3k5NiIsImEiOiJja203ZXZkYTgwNjN3MnZtZDJyZWFtdHZtIn0.CF9MEkv7qD15uEJqq499ig',\n            maxZoom: 13,\n            id: 'mapbox/light-v10',\n            minZoom: 3\n        }).addTo(mymap);\n\n        var geojson;\n\n        function clickFeature(e) {\n            const feature = e.target.feature;\n            if (feature.properties.wine_count) self.openDialog(feature.properties)\n        }\n\n        function onEachFeature(feature, layer) {\n            layer.on({\n                mouseover: highlightFeature,\n                mouseout: e => geojson.resetStyle(e.target),\n                click: clickFeature\n            });\n        }\n\n        geojson = L.geoJson(countries, {\n            style: mapStyle,\n            onEachFeature: onEachFeature\n        }).addTo(mymap)\n\n        //    Custom legend control\n        const legend = L.control({position: 'bottomright'});\n        legend.onAdd = function (map) {\n            let div = L.DomUtil.create('div', 'info legend'),\n                grades = countMap;\n            div.innerHTML += '<span style=\"font-weight: bold\"> Number of Wines </span><br>'\n            for (let i = 0; i < grades.length; i++) {\n                div.innerHTML +=\n                    '<i style=\"background:' + getColor(grades[i]) + '\"></i> ' +\n                    (grades[i - 1] ? grades[i - 1] : '0') + '&ndash;' + grades[i] + '<br>';\n            }\n            return div;\n        };\n        legend.addTo(mymap);\n\n        // const choroLayerGroup = L.FeatureGroup([geojson]);\n\n        // PieMap\n        const rmax = 27\n\n        // L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\n        //     attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        //     accessToken: 'pk.eyJ1Ijoiampib3k5NiIsImEiOiJja203ZXZkYTgwNjN3MnZtZDJyZWFtdHZtIn0.CF9MEkv7qD15uEJqq499ig',\n        //     maxZoom: 15,\n        //     id: 'mapbox/light-v10',\n        //     minZoom: 6\n        // }).addTo(pieMapLayerGroup);\n\n        function defineClusterIcon(cluster) {\n            var children = cluster.getAllChildMarkers(),\n                n = children.reduce((a, b) => a + b.feature.properties.wine_count, 0), //Get number of markers in cluster\n                strokeWidth = 1, //Set clusterpie stroke width\n                r = rmax-2*strokeWidth-(n<10?15:n<50?13:n<100?11:n<500?9:n<1000?7:n<2000?5:n<4000?3:n<5000?1:0), //Calculate clusterpie radius...\n                iconDim = (r+strokeWidth)*2, //...and divIcon dimensions (leaflet really want to know the size)\n\n                data = d3.group(children, d => d.feature.properties),\n                //bake some svg markup\n                html = bakeThePie({data: data,\n                    valueFunc: function(d){return Math.sum(d.values.forEach(d => d.value[0].feature.properties.winery_count));},\n                    strokeWidth: 1,\n                    outerRadius: r,\n                    innerRadius: r - 4,\n                    pieClass: 'cluster-pie',\n                    pieLabel: n,\n                    pieLabelClass: 'marker-cluster-pie-label',\n                    pathClassFunc: function(d){return \"category-1\";},\n                    pathTitleFunc: function(d){return d.feature._leaflet_id;}\n                }),\n                //Create a new divIcon and assign the svg markup to the html property\n                myIcon = new L.DivIcon({\n                    html: html,\n                    className: 'marker-cluster',\n                    iconSize: new L.Point(iconDim, iconDim)\n                });\n            return myIcon;\n        }\n\n\n        let markerclusters = L.markerClusterGroup({\n            maxClusterRadius: 2 * rmax,\n            iconCreateFunction: defineClusterIcon //this is where the magic happens\n        })\n\n        function defineFeature(feature, latlng) {\n            var n = feature.properties.wine_count, //Get number of markers in cluster\n                strokeWidth = 1, //Set clusterpie stroke width\n                r = rmax-2*strokeWidth-(n<10?15:n<50?13:n<100?11:n<500?9:n<1000?7:n<2000?5:n<4000?3:n<5000?1:0), //Calculate clusterpie radius...\n                iconDim = (r+strokeWidth)*2,\n\n                html = bakeThePie({data: feature,\n                valueFunc: function(d){return Math.sum(d.values.forEach(d => d.value[0].feature.properties.winery_count));},\n                strokeWidth: 1,\n                    group: 0,\n                outerRadius: r,\n                innerRadius: r - 4,\n                pieClass: 'cluster-pie',\n                pieLabel: n,\n                pieLabelClass: 'marker-cluster-pie-label',\n                pathClassFunc: function(d){return \"category-1\";},\n                pathTitleFunc: function(d){return d.feature._leaflet_id}\n            })\n\n            const myIcon =  new L.DivIcon({\n                html: html,\n                className: 'marker-cluster',\n                iconSize: new L.Point(iconDim, iconDim)\n            });\n            return L.marker(latlng, {icon: myIcon})\n        }\n\n        var markers = L.geoJson(wine_geo, {\n            pointToLayer: defineFeature,\n            // onEachFeature: defineFeaturePopup\n        })\n\n        markerclusters.addLayer(markers)\n        // const markercluster = L.markerClusterGroup()\n        // markercluster.addLayer(markers).addTo(pieMapLayerGroup)\n\n\n        // legend.addTo(mymap);\n        // L.control.layers({'Choropleth Map': choroLayerGroup, 'Pie Map': pieMapLayerGroup}).addTo(mymap)\n\n        geojson.beforeAdd = map => {\n            legend.addTo(map);\n        }\n\n        markerclusters.beforeAdd = map => {\n            map.removeControl(legend)\n        }\n\n        mymap.on('zoomend', (map) => {\n            const zoomLevel = mymap.getZoom()\n            console.log(zoomLevel)\n            if (zoomLevel < 6) {\n                if (mymap.hasLayer(markerclusters)) {\n                    mymap.removeLayer(markerclusters)\n                    geojson.addTo(mymap)\n                }\n            }\n            if (zoomLevel >= 6) {\n                if (mymap.hasLayer(geojson)) {\n                    mymap.removeLayer(geojson)\n                    markerclusters.addTo(mymap)\n                }\n            }\n        })\n\n    }\n\n\n    render() {\n        return (\n            <div>\n                <div id=\"mapid\"/>\n                <FullScreenDialog open={this.state.showDialog} closeDialog={this.closeDialog}\n                                  openDialog={this.openDialog} activeData={this.state.activeData}\n                                  properties={this.state.properties} priceData={this.state.priceData}/>\n            </div>\n\n        )\n\n    }\n}\n","export default __webpack_public_path__ + \"static/media/sliced.11795653.csv\";","import React from \"react\";\nimport * as d3 from 'd3';\nimport {RadarChart} from \"./RadarChart\"\nimport originData from '../../data/sliced.csv'\nimport '../../css/radarChart.css'\n\nvar type_id = 1\nvar type_data = {\n    1: ['Cabernet Sauvignon',\n        'Pinot Noir',\n        'Syrah',\n        'Malbec',\n        'Shiraz',\n        'Côte de Nuits Red',\n        'Merlot',\n        'Côte de Beaune Red'],\n    2: ['Chardonnay',\n        'Riesling',\n        'Sauvignon Blanc',\n        'Côte de Beaune White',\n        'Macônnais White',\n        'Chablis',\n        'Chenin Blanc',\n        'Pinot Grigio'],\n    3: ['Champagne', 'Prosecco', 'Cava', 'Cremant'],\n    4: ['Rosé', 'Pinot Grigio', 'Pinot Noir'],\n    5: ['Sherry', 'Madeira', 'Pedro Ximenez'],\n    6: ['Sauternes', 'Riesling', 'Chenin Blanc', 'Soave']\n}\n\n\nvar margin = {top: 50, right: 25, bottom: 50, left: 25},\n    width = Math.min(700, window.innerWidth * 0.8 / 4 - 10) - margin.left - margin.right,\n    height = Math.min(width, window.innerHeight * 0.8 - margin.top - margin.bottom - 20);\n\nvar labels = ['rating', 'price', 'tannin', 'sweetness', 'intensity', 'acidity', 'fizziness']\nvar type_labels = {\n    1: ['rating', 'price', 'sweetness', 'intensity', 'tannin', 'acidity'],\n    2: ['rating', 'price', 'sweetness', 'intensity', 'acidity'],\n    3: ['rating', 'price', 'fizziness', 'intensity', 'acidity'],\n    4: ['rating', 'price', 'sweetness', 'intensity', 'acidity'],\n    5: ['rating', 'price', 'sweetness', 'intensity', 'acidity'],\n}\nvar color = {\n    1: d3.scaleOrdinal().range(['rgba(177,18,38,0.73)']),\n    2: d3.scaleOrdinal().range(['#e4b953']),\n    3: d3.scaleOrdinal().range(['#898ebe']),\n    4: d3.scaleOrdinal().range(['#CC337F']),\n    5: d3.scaleOrdinal().range(['#722f37']),\n}\n\nconst type_map = {\"Red\": 1, \"White\": 2, \"Sparkling\": 3, \"Rose\": 4, \"Fortified\": 5, \"Dessert\": 6}\n\nvar radarChartOptions = {\n    w: width,\n    h: height,\n    margin: margin,\n    maxValue: 0.5,\n    levels: 1,\n    roundStrokes: true,\n    color: color,\n    labels: labels\n};\n\n\nexport default class StyleRadar extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    componentDidMount() {\n        d3.csv(originData)\n            .then((dataset) => {\n\n                const sum = (a, b) => a + b\n\n\n                // build scales\n                let parseF = str => (str ? parseFloat(str) : 0)\n                let parseS = str => (str ? str : 'Unknown')\n                let range = [0.03, 0.001]\n                let scales = {}\n                labels.map(l => {\n                    let sorted = dataset.map(d => d[l])\n                        .filter(v => v)\n                        .sort((a, b) => a - b)\n\n                    let lrange = l == 'rating' || l == 'price' ? range[1] : range[0]\n\n                    scales[l] = d3.scaleLinear()\n                        .domain([d3.min(dataset, (d) => parseF(sorted[Math.floor(sorted.length * lrange)])),\n                            d3.max(dataset, (d) => parseF(sorted[Math.floor(sorted.length * (1 - lrange))]))])\n                        .range([0.1, 1])\n                })\n\n\n                // function to get data & draw chart\n                const key_filter = (key, chart_id) => {\n                    console.log(key, chart_id)\n                    let count = key => dataset.filter(d => d.style_varietal_name === key).length\n                    d3.select('#count').text(`Count: ${count(key)}`)\n\n                    let new_data = []\n                    let tlabels = type_labels[type_id]\n                    const valid = d => (tlabels.map(l => (d[l] ? 1 : 0)).reduce(sum, 0) >= tlabels.length)\n                    const filtered = dataset\n                        .filter(d => valid(d))\n                        .filter(d => d['style_varietal_name'] == key)\n\n                    filtered.forEach((d, i) => {\n                        new_data.push(tlabels.map(l => {\n                            let lowbound = 0, upbound = 1.1\n                            let value = scales[l](parseF(d[l]))\n                            value = Math.min(Math.max(value, lowbound), upbound)\n                            return {axis: l, value: value, actValue: parseS(d[l])}\n                        }))\n                    })\n                    radarChartOptions.labels = tlabels\n                    radarChartOptions.color = color[type_id]\n                    RadarChart(`#${chart_id}`, new_data, radarChartOptions);\n                }\n\n\n                // tap header click event\n                d3.selectAll('.tablink').on('click', function (e) {\n                    let type_name = e.toElement.name\n                    type_id = type_map[type_name]\n                    d3.selectAll(\".tabcontent\").style(\"display\", \"none\")\n                    d3.selectAll(\".tablink\").style('background-color', '')\n\n                    let block = d3.select(`#${type_name}`).style(\"display\", \"grid\")\n\n                    // build contents\n                    block.selectAll('.grid-item').remove()\n                    const items = block.selectAll('.grid-item')\n                        .data(type_data[type_id])\n                        .enter()\n                        .append('div')\n                        .attr('class', 'grid-item')\n\n                    items.append('div')\n                        .attr('class', 'radar-chart')\n                        .attr('id', (d, i) => `${type_name}${i}`)\n                        .each((d, i) => {\n                            key_filter(d, `${type_name}${i}`)\n                        })\n                    e.toElement.style.backgroundColor = '#d62728';\n\n                    items.append('h1')\n                        .text(d => d)\n                })\n\n                document.getElementsByName(\"Red\")[0].click();\n\n            })\n    }\n\n    render() {\n        return (\n            <div id=\"radarContainer\">\n                <button className=\"tablink\" name=\"Red\">Red Wine</button>\n                <button className=\"tablink\" name=\"White\">White Wine</button>\n                <button className=\"tablink\" name=\"Sparkling\">Sparkling</button>\n                <button className=\"tablink\" name=\"Rose\">Rose</button>\n                <button className=\"tablink\" name=\"Fortified\">Fortified</button>\n\n\n                <div id=\"Red\" className=\"tabcontent grid-container\">\n                </div>\n\n                <div id=\"White\" className=\"tabcontent grid-container\">\n                </div>\n\n                <div id=\"Sparkling\" className=\"tabcontent grid-container\">\n                </div>\n\n                <div id=\"Rose\" className=\"tabcontent grid-container\">\n                </div>\n\n                <div id=\"Fortified\" className=\"tabcontent grid-container\">\n                </div>\n            </div>\n\n        )\n\n    }\n}\n","/////////////////////////////////////////////////////////\n/////////////// The Radar Chart Function ////////////////\n/////////////// Written by Nadieh Bremer ////////////////\n////////////////// VisualCinnamon.com ///////////////////\n/////////// Inspired by the code of alangrafu ///////////\n/////////////////////////////////////////////////////////\nimport * as d3 from 'd3';\n\nexport function RadarChart(id, data, options) {\n\tvar cfg = {\n\t w: 100,\t\t\t\t//Width of the circle\n\t h: 100,\t\t\t\t//Height of the circle\n\t margin: {top: 20, right: 20, bottom: 20, left: 20}, //The margins of the SVG\n\t levels: 3,\t\t\t\t//How many levels or inner circles should there be drawn\n\t maxValue: 0, \t\t\t//What is the value that the biggest circle will represent\n\t labelFactor: 1.25, \t//How much farther than the radius of the outer circle should the labels be placed\n\t wrapWidth: 60, \t\t//The number of pixels after which a label needs to be given a new line\n\t opacityArea: 0.01, \t//The opacity of the area of the blob\n\t dotRadius: 4, \t\t\t//The size of the colored circles of each blog\n\t opacityCircles: 0.1, \t//The opacity of the circles of each blob\n\t strokeWidth: 2, \t\t//The width of the stroke around each blob\n\t roundStrokes: false,\t//If true the area and stroke will follow a round path (cardinal-closed)\n\t color: d3.schemeCategory10\t//Color function\n\t};\n\n\t//Put all of the options into a variable called cfg\n\tif('undefined' !== typeof options){\n\t  for(var i in options){\n\t\tif('undefined' !== typeof options[i]){ cfg[i] = options[i]; }\n\t  }//for i\n\t}//if\n\n\t//If the supplied maxValue is smaller than the actual one, replace by the max in the data\n\t// var maxValue = Math.max(cfg.maxValue, d3.max(data, function(i){return d3.max(i.map(function(o){return o.value;}))}));\n    var maxValue = 1\n\n\tvar allAxis = cfg.labels, // (data[0].map(function(i, j){return i.axis})),\t//Names of each axis\n\t\ttotal = allAxis.length,\t\t\t\t\t//The number of different axes\n\t\tradius = Math.min(cfg.w/2, cfg.h/2), \t//Radius of the outermost circle\n\t\tFormat = d3.format('%'),\t\t\t \t//Percentage formatting\n\t\tangleSlice = Math.PI * 2 / total;\t\t//The width in radians of each \"slice\"\n\n\t//Scale for the radius\n\tvar rScale = d3.scaleLinear()\n\t\t.range([0, radius])\n\t\t.domain([0, maxValue]);\n\n\t/////////////////////////////////////////////////////////\n\t//////////// Create the container SVG and g /////////////\n\t/////////////////////////////////////////////////////////\n\n\t//Remove whatever chart with the same id/class was present before\n\td3.select(id).select(\"svg\").remove();\n\n\t//Initiate the radar chart SVG\n\tvar svg = d3.select(id).append(\"svg\")\n\t\t\t.attr(\"width\",  cfg.w + cfg.margin.left + cfg.margin.right)\n\t\t\t.attr(\"height\", cfg.h + cfg.margin.top + cfg.margin.bottom)\n\t\t\t.attr(\"class\", \"radar\"+id);\n\t//Append a g element\n\tvar g = svg.append(\"g\")\n\t\t\t.attr(\"transform\", \"translate(\" + (cfg.w/2 + cfg.margin.left) + \",\" + (cfg.h/2 + cfg.margin.top) + \")\");\n\n\t/////////////////////////////////////////////////////////\n\t////////// Glow filter for some extra pizzazz ///////////\n\t/////////////////////////////////////////////////////////\n\n\t//Filter for the outside glow\n    var defs = g.append('defs')\n\tvar filter = defs.append('filter').attr('id','glow'),\n\t\tfeGaussianBlur = filter.append('feGaussianBlur').attr('stdDeviation','2.5').attr('result','coloredBlur'),\n\t\tfeMerge = filter.append('feMerge'),\n\t\tfeMergeNode_1 = feMerge.append('feMergeNode').attr('in','coloredBlur'),\n\t\tfeMergeNode_2 = feMerge.append('feMergeNode').attr('in','SourceGraphic');\n\n\t/////////////////////////////////////////////////////////\n\t/////////////// Draw the Circular grid //////////////////\n\t/////////////////////////////////////////////////////////\n\n\t//Wrapper for the grid & axes\n\tvar axisGrid = g.append(\"g\").attr(\"class\", \"axisWrapper\");\n\n\t//Draw the background circles\n\taxisGrid.selectAll(\".levels\")\n\t   .data(d3.range(1,(cfg.levels+1)).reverse())\n\t   .enter()\n\t\t.append(\"circle\")\n\t\t.attr(\"class\", \"gridCircle\")\n\t\t.attr(\"r\", function(d, i){return radius/cfg.levels*d;})\n\t\t.style(\"fill\", \"#CDCDCD\")\n\t\t.style(\"stroke\", \"#CDCDCD\")\n\t\t.style(\"fill-opacity\", cfg.opacityCircles)\n\n\t// return ;\n\n\t/////////////////////////////////////////////////////////\n\t//////////////////// Draw the axes //////////////////////\n\t/////////////////////////////////////////////////////////\n\n\t//Create the straight lines radiating outward from the center\n\tvar axis = axisGrid.selectAll(\".axis\")\n\t\t.data(allAxis)\n\t\t.enter()\n\t\t.append(\"g\")\n\t\t.attr(\"class\", \"axis\");\n\t//Append the lines\n    var axis_len = 0.1\n\taxis.append(\"line\")\n        .attr(\"x1\", function(d, i){ return rScale(maxValue*(1-axis_len/2)) * Math.cos(angleSlice*i - Math.PI/2); })\n        .attr(\"y1\", function(d, i){ return rScale(maxValue*(1-axis_len/2)) * Math.sin(angleSlice*i - Math.PI/2); })\n\t\t.attr(\"x2\", function(d, i){ return rScale(maxValue*(1+axis_len/2)) * Math.cos(angleSlice*i - Math.PI/2); })\n\t\t.attr(\"y2\", function(d, i){ return rScale(maxValue*(1+axis_len/2)) * Math.sin(angleSlice*i - Math.PI/2); })\n\t\t.attr(\"class\", \"line\")\n\t\t.style(\"stroke\", \"#CDCDCD\")\n\t\t.style(\"stroke-width\", \"2px\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", 0)\n\t\t.style(\"stroke\", \"white\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t//Creates a function that makes SVG paths in the shape of arcs with the specified inner and outer radius\n\tvar arc = d3.arc()\n\t\t.innerRadius(radius)\n\t\t.outerRadius(radius);\n\n\t//Creates function that will turn the month data into start and end angles\n\tvar pie\n\t\tpie = d3.pie()\n\t\t.value(function(d) { return 1; })\n\t\t.padAngle(.01)\n\t\t.sort(null);\n\n\tconsole.log(allAxis)\n\n\t//Draw the arcs themselves\n\tg.selectAll(\".arc\")\n\t\t.data(pie(allAxis))\n\t\t.enter().append(\"path\")\n\t\t.attr(\"class\", \"arc\")\n\t\t.attr(\"id\", function(d,i) { return `arc${id}${i}`; })\n\t\t.attr(\"d\", arc)\n\t\t.style(\"stroke-width\", \"0px\")\n\t\t.style('fill', 'none')\n\n\n\n\n\n\n\n\t//Append the labels at each axis\n\taxis.append(\"text\")\n\t\t.attr(\"class\", \"labelText\")\n\t\t.attr(\"dy\", \"-5\")\n\t\t.append(\"textPath\")\n\t\t.attr(\"xlink:href\",function(d,i){return `#arc${id}${i}`;})\n\t\t.text(function(d){return d;})\n\n\n    if (data.length == 0) {\n        return ;\n    }\n\n\t/////////////////////////////////////////////////////////\n\t///////////// Draw the radar chart blobs ////////////////\n\t/////////////////////////////////////////////////////////\n\n\t//The radial line function\n\tvar radarLine = d3.radialLine()\n        .curve(d3.curveLinearClosed)\n        .radius(d => rScale(d.value))\n        .angle((d,i) => i * angleSlice);\n\n\tif(cfg.roundStrokes) {\n\t\tradarLine.curve(d3.curveCardinalClosed)\n\t}\n\n\t//Create a wrapper for the blobs\n\tvar blobWrapper = g.selectAll(\".radarWrapper\")\n\t\t.data(data)\n\t\t.enter().append(\"g\")\n\t\t.attr(\"class\", \"radarWrapper\");\n\n\t//Append the backgrounds\n\tblobWrapper\n\t\t.append(\"path\")\n\t\t.attr(\"class\", \"radarArea\")\n\t\t.attr(\"d\", function(d,i) { return radarLine(d); })\n\t\t.style(\"fill\", function(d,i) { return cfg.color(i); })\n\t\t.style(\"fill-opacity\", cfg.opacityArea)\n\n\n\t//Create the outlines\n\tblobWrapper.append(\"path\")\n\t\t.attr(\"class\", \"radarStroke\")\n\t\t.attr(\"d\", function(d,i) { return radarLine(d); })\n\t\t// .style(\"stroke-width\", cfg.strokeWidth + \"px\")\n\t\t// .style(\"stroke\", function(d,i) { return cfg.color(i); })\n\t\t.style(\"fill\", \"none\")\n\t\t// .style(\"filter\" , \"url(#glow)\");\n\n\n\t//Set up the small tooltip for when you hover over a circle\n\tvar tooltip = g.append(\"text\")\n\t\t.attr(\"class\", \"tooltip\")\n\t\t.style(\"opacity\", 0);\n\n\n}//RadarChart\n","export default __webpack_public_path__ + \"static/media/wine_name_grapes.8bdee9b9.csv\";","export default __webpack_public_path__ + \"static/media/tree.c5672213.csv\";","export default __webpack_public_path__ + \"static/media/wine_radar.a149a998.csv\";","/////////////////////////////////////////////////////////\n/////////////// The Radar Chart Function ////////////////\n/////////////// Written by Nadieh Bremer ////////////////\n////////////////// VisualCinnamon.com ///////////////////\n/////////// Inspired by the code of alangrafu ///////////\n/////////////////////////////////////////////////////////\nimport * as d3 from \"d3\"\n\nexport function CompareRadar(id, data, options, new_data) {\n    var cfg = {\n        w: 600,\t\t\t\t//Width of the circle\n        h: 600,\t\t\t\t//Height of the circle\n        margin: {top: 20, right: 20, bottom: 20, left: 20}, //The margins of the SVG\n        levels: 3,\t\t\t\t//How many levels or inner circles should there be drawn\n        maxValue: 0, \t\t\t//What is the value that the biggest circle will represent\n        labelFactor: 1.25, \t//How much farther than the radius of the outer circle should the labels be placed\n        wrapWidth: 60, \t\t//The number of pixels after which a label needs to be given a new line\n        opacityArea: 0.35, \t//The opacity of the area of the blob\n        dotRadius: 4, \t\t\t//The size of the colored circles of each blog\n        opacityCircles: 0.1, \t//The opacity of the circles of each blob\n        strokeWidth: 2, \t\t//The width of the stroke around each blob\n        roundStrokes: false,\t//If true the area and stroke will follow a round path (cardinal-closed)\n        color: d3.schemeCategory10\t//Color function\n    };\n\n    //Put all of the options into a variable called cfg\n    if('undefined' !== typeof options){\n        for(var i in options){\n            if('undefined' !== typeof options[i]){ cfg[i] = options[i]; }\n        }//for i\n    }//if\n\n    //If the supplied maxValue is smaller than the actual one, replace by the max in the data\n    // var maxValue = Math.max(cfg.maxValue, d3.max(data, function(i){return d3.max(i.map(function(o){return o.value;}))}));\n    var maxValue = 1\n\n    var allAxis = cfg.labels, // (data[0].map(function(i, j){return i.axis})),\t//Names of each axis\n        total = allAxis.length,\t\t\t\t\t//The number of different axes\n        radius = Math.min(cfg.w/2, cfg.h/2), \t//Radius of the outermost circle\n        Format = d3.format('%'),\t\t\t \t//Percentage formatting\n        angleSlice = Math.PI * 2 / total;\t\t//The width in radians of each \"slice\"\n\n    //Scale for the radius\n    var rScale = d3.scaleLinear()\n        .range([0, radius])\n        .domain([0, maxValue]);\n\n    /////////////////////////////////////////////////////////\n    //////////// Create the container SVG and g /////////////\n    /////////////////////////////////////////////////////////\n\n    //Remove whatever chart with the same id/class was present before\n    d3.select(id).select(\"svg\").remove();\n\n    //Initiate the radar chart SVG\n    var svg = d3.select(id).append(\"svg\")\n        .attr(\"width\",  cfg.w + cfg.margin.left + cfg.margin.right)\n        .attr(\"height\", cfg.h + cfg.margin.top + cfg.margin.bottom)\n        .attr(\"class\", \"radar\"+id);\n    //Append a g element\n    var g = svg.append(\"g\")\n        .attr(\"transform\", \"translate(\" + (cfg.w/2 + cfg.margin.left) + \",\" + (cfg.h/2 + cfg.margin.top) + \")\");\n\n    /////////////////////////////////////////////////////////\n    ////////// Glow filter for some extra pizzazz ///////////\n    /////////////////////////////////////////////////////////\n\n    //Filter for the outside glow\n    var defs = g.append('defs')\n    var filter = defs.append('filter').attr('id','glow'),\n        feGaussianBlur = filter.append('feGaussianBlur').attr('stdDeviation','2.5').attr('result','coloredBlur'),\n        feMerge = filter.append('feMerge'),\n        feMergeNode_1 = feMerge.append('feMergeNode').attr('in','coloredBlur'),\n        feMergeNode_2 = feMerge.append('feMergeNode').attr('in','SourceGraphic');\n\n    /////////////////////////////////////////////////////////\n    /////////////// Draw the Circular grid //////////////////\n    /////////////////////////////////////////////////////////\n\n    //Wrapper for the grid & axes\n    var axisGrid = g.append(\"g\").attr(\"class\", \"axisWrapper\");\n\n    //Draw the background circles\n    axisGrid.selectAll(\".levels\")\n        .data(d3.range(1,(cfg.levels+1)).reverse())\n        .enter()\n        .append(\"circle\")\n        .attr(\"class\", \"gridCircle\")\n        .attr(\"r\", function(d, i){return radius/cfg.levels*d;})\n        .style(\"fill\", \"#CDCDCD\")\n        .style(\"stroke\", \"#CDCDCD\")\n        .style(\"fill-opacity\", cfg.opacityCircles)\n        .style(\"filter\" , \"url(#glow)\");\n\n    /////////////////////////////////////////////////////////\n    //////////////////// Draw the axes //////////////////////\n    /////////////////////////////////////////////////////////\n\n    //Create the straight lines radiating outward from the center\n    var axis = axisGrid.selectAll(\".axis\")\n        .data(allAxis)\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"axis\");\n    //Append the lines\n    var axis_len = 0.1\n    axis.append(\"line\")\n        .attr(\"x1\", function(d, i){ return rScale(maxValue*(1-axis_len/2)) * Math.cos(angleSlice*i - Math.PI/2); })\n        .attr(\"y1\", function(d, i){ return rScale(maxValue*(1-axis_len/2)) * Math.sin(angleSlice*i - Math.PI/2); })\n        .attr(\"x2\", function(d, i){ return rScale(maxValue*(1+axis_len/2)) * Math.cos(angleSlice*i - Math.PI/2); })\n        .attr(\"y2\", function(d, i){ return rScale(maxValue*(1+axis_len/2)) * Math.sin(angleSlice*i - Math.PI/2); })\n        .attr(\"class\", \"line\")\n        .style(\"stroke\", \"#CDCDCD\")\n        .style(\"stroke-width\", \"2px\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", 0)\n        .style(\"stroke\", \"white\")\n\n\n\n    //Append the labels at each axis\n    axis.append(\"text\")\n        .attr(\"class\", \"legend\")\n        .style(\"font-size\", \"11px\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dy\", \"0.35em\")\n        .attr(\"x\", function(d, i){ return rScale(maxValue * cfg.labelFactor) * Math.cos(angleSlice*i - Math.PI/2); })\n        .attr(\"y\", function(d, i){ return rScale(maxValue * cfg.labelFactor) * Math.sin(angleSlice*i - Math.PI/2); })\n        .text(function(d){return d})\n        .call(wrap, cfg.wrapWidth);\n\n    if (data.length == 0) {\n        return ;\n    }\n\n    /////////////////////////////////////////////////////////\n    ///////////// Draw the radar chart blobs ////////////////\n    /////////////////////////////////////////////////////////\n\n    //The radial line function\n    var radarLine = d3.radialLine()\n        .curve(d3.curveLinearClosed)\n        .radius(d => rScale(d.value))\n        .angle((d,i) => i * angleSlice);\n\n    if(cfg.roundStrokes) {\n        radarLine.curve(d3.curveCardinalClosed)\n    }\n\n    // data = data.map((d,i) => Object.assign({i:i}, d))\n    // console.log(data)\n\n    //Create a wrapper for the blobs\n    var blobWrapper = g.selectAll(\".radarWrapper\")\n        .data(data)\n        .enter().append(\"g\")\n        .attr(\"class\", \"radarWrapper\");\n\n    //Append the backgrounds\n    blobWrapper\n        .append(\"path\")\n        .attr(\"class\", \"radarArea\")\n        .attr(\"d\", function(d,i) { return radarLine(d); })\n        .style(\"fill\", function(d,i) { return cfg.color(i); })\n        .style(\"fill-opacity\", cfg.opacityArea)\n        .on('mouseover', function (d,i){\n            //Dim all blobs\n            d3.selectAll(\".radarArea\")\n                .transition().duration(200)\n                .style(\"fill-opacity\", 0.1);\n            //Bring back the hovered over blob\n            d3.select(this)\n                .transition().duration(200)\n                .style(\"fill-opacity\", 0.7);\n        })\n        .on('mouseout', function(){\n            //Bring back all blobs\n            d3.selectAll(\".radarArea\")\n                .transition().duration(200)\n                .style(\"fill-opacity\", cfg.opacityArea);\n        })\n        .on(\"contextmenu\", function(e,d) {\n            e.preventDefault();\n            new_data.splice(new_data.findIndex(_d => _d === d), 1)\n            CompareRadar(\".compareRadar\", new_data, options, new_data)\n        })\n        .attr(\"mask\", (d, i) => {\n            return `url(#mask${i})`;\n        })\n\n    //Create the outlines\n    blobWrapper.append(\"path\")\n        .attr(\"class\", \"radarStroke\")\n        .attr(\"d\", function(d,i) { return radarLine(d); })\n        // .style(\"stroke-width\", cfg.strokeWidth + \"px\")\n        // .style(\"stroke\", function(d,i) { return cfg.color(i); })\n        .style(\"fill\", \"none\")\n    // .style(\"filter\" , \"url(#glow)\");\n\n    //Append the circles\n    blobWrapper.selectAll(\".radarCircle\")\n        .data(function(d,i) { return d.map(d => [d, i]); })\n        .enter().append(\"circle\")\n        .attr(\"class\", \"radarCircle\")\n        .attr(\"r\", cfg.dotRadius)\n        .attr(\"cx\", function(d,i){ return rScale(d[0].value) * Math.cos(angleSlice*i - Math.PI/2); })\n        .attr(\"cy\", function(d,i){ return rScale(d[0].value) * Math.sin(angleSlice*i - Math.PI/2); })\n        .style(\"fill\", function(d,i) { return cfg.color(d[1]); })\n        // .style(\"fill-opacity\", cfg.opacityArea);\n        .style(\"fill-opacity\", 1);\n\n\n\n\n\n\n\n    /////////////////////////////////////////////////////////\n    //////// Append invisible circles for tooltip ///////////\n    /////////////////////////////////////////////////////////\n\n    //Wrapper for the invisible circles on top\n    var blobCircleWrapper = g.selectAll(\".radarCircleWrapper\")\n        .data(data)\n        .enter().append(\"g\")\n        .attr(\"class\", \"radarCircleWrapper\");\n\n    //Append a set of invisible circles on top for the mouseover pop-up\n    blobCircleWrapper.selectAll(\".radarInvisibleCircle\")\n        .data(function(d,i) { return d; })\n        .enter().append(\"circle\")\n    // .attr(\"class\", \"radarArea\")\n        .attr(\"class\", \"radarInvisibleCircle\")\n        .attr(\"r\", cfg.dotRadius*1.5)\n        .attr(\"cx\", function(d,i){ return rScale(d.value) * Math.cos(angleSlice*i - Math.PI/2); })\n        .attr(\"cy\", function(d,i){ return rScale(d.value) * Math.sin(angleSlice*i - Math.PI/2); })\n        .style(\"fill\", \"none\")\n        .style(\"pointer-events\", \"all\")\n        .on(\"mouseover\", function(e,d) {\n            const newX =  parseFloat(d3.select(this).attr('cx')) - 10;\n            const newY =  parseFloat(d3.select(this).attr('cy')) - 10;\n\n            tooltip\n                .attr('x', newX)\n                .attr('y', newY)\n                .text(d.axis + ':' + String(d.actValue))\n                .transition().duration(200)\n                .style('opacity', 1);\n        })\n        .on(\"mouseout\", function(){\n            tooltip.transition().duration(200)\n                .style(\"opacity\", 0);\n        })\n\n\n    data.forEach(function(d, i){\n        const mask = defs.append(\"mask\")\n            .attr(\"id\", `mask${i}`);\n\n        mask.append(\"path\")\n        // .attr(\"class\", \"radarArea\")\n            .attr(\"d\", radarLine(d))\n            .style(\"fill\", 'white')\n\n        d.forEach((d,i) => {\n            mask.append(\"circle\")\n                .attr(\"r\", cfg.dotRadius*1.5-2)\n                .attr(\"cx\", rScale(d.value) * Math.cos(angleSlice*i - Math.PI/2))\n                .attr(\"cy\", rScale(d.value) * Math.sin(angleSlice*i - Math.PI/2))\n                .attr(\"fill\", 'black')\n        })\n    })\n\n\n    //Set up the small tooltip for when you hover over a circle\n    var tooltip = g.append(\"text\")\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0);\n\n    /////////////////////////////////////////////////////////\n    /////////////////// Helper Function /////////////////////\n    /////////////////////////////////////////////////////////\n\n    //Taken from http://bl.ocks.org/mbostock/7555321\n    //Wraps SVG text\n    function wrap(text, width) {\n        text.each(function() {\n            var text = d3.select(this),\n                words = text.text().split(/\\s+/).reverse(),\n                word,\n                line = [],\n                lineNumber = 0,\n                lineHeight = 1.4, // ems\n                y = text.attr(\"y\"),\n                x = text.attr(\"x\"),\n                dy = parseFloat(text.attr(\"dy\")),\n                tspan = text.text(null).append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n\n            while (word = words.pop()) {\n                line.push(word);\n                tspan.text(line.join(\" \"));\n                if (tspan.node().getComputedTextLength() > width) {\n                    line.pop();\n                    tspan.text(line.join(\" \"));\n                    line = [word];\n                    tspan = text.append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n                }\n            }\n        });\n    }//wrap\n\n}\n","import * as d3 from 'd3'\r\nimport '../../css/tree.css'\r\nimport { CompareRadar } from './comparisonRadar.js'\r\n\r\nexport default function drawRadialChart(id, csvpath, radar_csv, text){\r\n    d3.csv(csvpath).then((Treedata) => {\r\n        d3.csv(radar_csv).then((dataset) => {\r\n\r\n    var DURATION = 100; // d3 animation duration\r\n    var STAGGERN = 4; // delay for each node\r\n    var STAGGERD = 200; // delay for each depth\r\n    var NODE_DIAMETER = 4; // diameter of circular nodes\r\n    var MIN_ZOOM = 0.5; // minimum zoom allowed\r\n    var MAX_ZOOM = 10;  // maximum zoom allowed\r\n    var HAS_CHILDREN_COLOR = 'lightsteelblue';\r\n    var SELECTED_COLOR = '#a00';  // color of selected node\r\n    var ZOOM_INC = 0.04;  // zoom factor per animation frame\r\n    var PAN_INC = 3;  //  pan per animation frame\r\n    var ROT_INC = 0.3;  // rotation per animation frame\r\n\r\n    var counter = 0;  // node ids\r\n    var curNode;  // currently selected node\r\n    var curPath;  // array of nodes in the path to the currently selected node\r\n    var flag = 0;\r\n    // size of the diagram\r\n    var width = 500;\r\n    var height = 500;\r\n\r\n    // current pan, zoom, and rotation\r\n    var curX = width / 2;\r\n    var curY = height / 2;\r\n    var curZ = 1.0; // current zoom\r\n    var curR = 270; // current rotation\r\n\r\n// d3 diagonal projection for use by the node paths\r\n    // var diagonal= d3.svg.diagonal.radial()\r\n    //   .projection(function(d) {\r\n    //       return [d.y, d.x / 180 * Math.PI];\r\n    //   });\r\n\r\n    function project(x, y) {\r\n      // return [y, x / 180 * Math.PI];\r\n      var angle = (x - 90) / 180 * Math.PI, radius = y;\r\n      return [radius * Math.cos(angle), radius * Math.sin(angle)];\r\n    }\r\n\r\n    // d3 tree layout\r\n    var tree = d3.tree()\r\n      // .nodeSize([4.5, 120])\r\n      .size([360, Math.min(width, height) / 2 - 120])\r\n      .separation(function(a, b) {\r\n        return a.depth === 0 ? 1 : (a.parent === b.parent ? 1 : 2) / a.depth;\r\n    });\r\n\r\n    // define the svgBase, attaching a class for styling and the zoomListener\r\n    d3.select(id).select(\"svg\").remove();\r\n    var svgBase = d3.select('.drawRadialChart').append('svg')\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      // .on('mousedown', mousedown);\r\n\r\n    // Group which holds all nodes and manages pan, zoom, rotate\r\n    var svgGroup = svgBase.append('g')\r\n      .attr('transform', 'translate(' + curX + ',' + curY + ')');\r\n\r\n    d3.select('#selection').on('mousedown', switchroot);\r\n\r\n    // Define the data root\r\n    var stratify = d3.stratify()\r\n      .parentId(function(d) { return d.id.substring(0, d.id.lastIndexOf(\"\\\\\")); });\r\n\r\n    var root = stratify(Treedata)\r\n    // console.log(root)\r\n\r\n    // var root = d3.hierarchy(Treedata);\r\n    root.x0 = curY;\r\n    root.y0 = 0;\r\n    selectNode(root); // current selected node\r\n\r\n    // Collapse all children of root's children before rendering\r\n    // var text = \"South African Syrah\"\r\n    var source = root;\r\n    for(var i=0;i<6;i++){\r\n          for(var c in root.children[i].children){\r\n             var children_id = root.children[i].children[c].id\r\n             if(children_id.substring(children_id.lastIndexOf(\"\\\\\") + 1) == text){\r\n               source = root.children[i].children[c]\r\n               break\r\n             }\r\n          }\r\n    }\r\n\r\n    update(source);\r\n    update(source);\r\n    // switchroot(source);\r\n    // update(root); // Layout the tree initially and center on the root node\r\n    // update the tree\r\n    // source - source node of the update\r\n    // transition - whether to do a transition\r\n\r\n    function update(source, transition) {\r\n        selectNode(source);\r\n        if(source == root){\r\n          if (root.children) {\r\n            root.children.forEach(function(child) {\r\n                collapseTree(child);\r\n            });\r\n          }\r\n        }\r\n        // console.log(flag)\r\n        // var duration = transition ?\r\n        //   (event && event.altKey ? DURATION * 4 : DURATION) : 0;\r\n        var duration = 2\r\n\r\n        // Compute the new tree layout.\r\n\r\n        var nodes = tree(source).descendants();\r\n        var links = tree(source).links();\r\n        svgGroup.transition().duration(duration)\r\n        .attr('transform',\r\n          'rotate(' + curR + ' ' + curX + ' ' + curY +\r\n          ')translate(' + curX + ' ' + curY +\r\n          ')scale(' + curZ + ')');\r\n\r\n      // Update the nodes…\r\n      var node = svgGroup.selectAll('g.node')\r\n        .data(nodes, function(d) {\r\n          return d.id || (d.id = ++counter);\r\n        });\r\n\r\n        function wrap(text, width) {\r\n          text.each(function() {\r\n\r\n            var text = d3.select(this),\r\n                words = text.text().split(/\\s+/).reverse(),\r\n                word,\r\n                line = [],\r\n                lineNumber = 0,\r\n                lineHeight = 1.1, // ems\r\n                y = text.attr(\"y\"),\r\n                dy = parseFloat('.35em')/2,\r\n                tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\r\n                // console.log(words, y, text.attr(\"dy\"))\r\n            while (word = words.pop()) {\r\n              line.push(word);\r\n              tspan.text(line.join(\"  \"));\r\n              if (tspan.node().getComputedTextLength() > width) {\r\n                line.pop();\r\n                tspan.text(line.join(\"  \"));\r\n                line = [word];\r\n                tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", lineHeight + dy + \"em\").text(word);\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n      // Enter any new nodes at the parent's previous position\r\n      var nodeEnter = node.enter().insert('g', ':first-child')\r\n          .attr('class', 'node')\r\n          // .attr('transform', 'rotate(' + (source.x0 - 90) + ')translate(' + source.y0 + ')')\r\n          .on('click', click)\r\n          .on('dblclick', dblclick)\r\n          // .on('mousedown', suppress);\r\n\r\n      nodeEnter.append('circle')\r\n        .attr('r', 1e-6)\r\n        .style('fill', function(d) {\r\n          return d._children ? HAS_CHILDREN_COLOR : 'white';\r\n        });\r\n\r\n      nodeEnter.append('text')\r\n        // .text(function(d) {  if(d.name.length > 10) { return wordwrap(d.name, 10, '<br>') } } )\r\n        .text(function(d) {\r\n          return d.id.substring(d.id.lastIndexOf(\"\\\\\") + 1);\r\n          // return d.data.name;\r\n        })\r\n        .style('opacity', 0.9)\r\n        .style('fill-opacity', 0)\r\n        .attr('transform', function() {\r\n            return ((source.x0 + curR) % 360 <= 180 ?\r\n                'translate(8)scale(' :\r\n                'rotate(180)translate(-8)scale('\r\n              ) + reduceZ() + ')';\r\n        });\r\n\r\n      // update existing graph nodes\r\n\r\n      // Change the circle fill depending on whether it has children and is collapsed\r\n      node.select('circle')\r\n        .attr('r', NODE_DIAMETER * reduceZ())\r\n        .style('fill', function(d) {\r\n            return d._children ? HAS_CHILDREN_COLOR : 'white';\r\n        }).attr('stroke', function(d) {\r\n            return d.selected ? SELECTED_COLOR : 'steelblue';\r\n        }).attr('stroke-width', function(d) {\r\n            return d.selected ? 3 : 1.5;\r\n        });\r\n\r\n      node.select('text')\r\n        .attr('text-anchor', function(d) {\r\n            return (d.x + curR) % 360 <= 180 ? 'start' : 'end';\r\n        }).attr('transform', function(d) {\r\n            return ((d.x + curR) % 360 <= 180 ?\r\n                'translate(8)scale(' :\r\n                'rotate(180)translate(-8)scale('\r\n              ) + reduceZ() +')';\r\n        }).attr('fill', function(d) {\r\n            return d.selected ? SELECTED_COLOR : 'black';\r\n        }).attr('dy', '.35em');\r\n\r\n      var nodeUpdate = node.merge(nodeEnter).transition().duration(duration)\r\n        .delay( transition ? function(d, i) {\r\n            return i * STAGGERN +\r\n              Math.abs(d.depth - curNode.depth) * STAGGERD; }  : 0)\r\n        .attr('transform', function(d) {\r\n            return 'rotate(' + (d.x - 90) + ')translate(' + d.y + ')';\r\n        });\r\n\r\n      nodeUpdate.select('circle')\r\n        .attr('r', NODE_DIAMETER * reduceZ());\r\n        // .style('fill', function(d) {\r\n        //   return d._children ? HAS_CHILDREN_COLOR : 'white';\r\n        // });\r\n\r\n      nodeUpdate.select('text')\r\n        .style('fill-opacity', 1);\r\n      nodeUpdate.select(\"text\").call(wrap, 90);\r\n\r\n      // Transition exiting nodes to the parent's new position and remove\r\n      var nodeExit = node.exit().transition().duration(duration)\r\n        .delay( transition ? function(d, i) {\r\n            return i * STAGGERN; } : 0)\r\n        .attr('transform', function() {\r\n          return 'rotate(' + (source.x - 90) +')translate(' + source.y + ')';\r\n      }).remove();\r\n\r\n      nodeExit.select('circle').attr('r', 0);\r\n      nodeExit.select('text').style('fill-opacity', 0);\r\n\r\n        // Update the links...\r\n        var link = svgGroup.selectAll('path.link')\r\n            .data(links, function(d) {\r\n              return d.target.id;\r\n            });\r\n\r\n// Enter any new links at the parent's previous position\r\n    link.enter().insert('path', 'g')\r\n        .attr('class', 'link')\r\n        .attr(\"d\", function(d) {\r\n                  return \"M\" + project(d.target.x, d.target.y)\r\n                      + \"C\" + project(d.target.x, (d.target.y + d.source.y) / 2)\r\n                      + \" \" + project(d.source.x, (d.target.y + d.source.y) / 2)\r\n                      + \" \" + project(d.source.x, d.source.y);\r\n                })\r\n\r\n    // Transition links to their new position\r\n    link.transition().duration(duration)\r\n      .delay( transition ? function(d, i) {\r\n          return i * STAGGERN +\r\n            Math.abs(d.source.depth - curNode.depth) * STAGGERD;\r\n            // Math.max(0, d.source.depth - curNode.depth) * STAGGERD;\r\n          } : 0)\r\n          .attr(\"d\", function(d) {\r\n            return \"M\" + project(d.target.x, d.target.y)\r\n                + \"C\" + project(d.target.x, (d.target.y + d.source.y) / 2)\r\n                + \" \" + project(d.source.x, (d.target.y + d.source.y) / 2)\r\n                + \" \" + project(d.source.x, d.source.y);\r\n          })\r\n\r\n    // Transition exiting nodes to the parent's new position\r\n    link.exit().transition().duration(duration)\r\n    .attr(\"d\", function(d) {\r\n      return \"M\" + project(d.target.x, d.target.y)\r\n          + \"C\" + project(d.target.x, (d.target.y + d.source.y) / 2)\r\n          + \" \" + project(d.source.x, (d.target.y + d.source.y) / 2)\r\n          + \" \" + project(d.source.x, d.source.y);\r\n    }).remove();\r\n\r\n        // Stash the old positions for transition\r\n        nodes.forEach(function(d) {\r\n          d.x0 = d.x;\r\n          d.y0 = d.y;\r\n        });\r\n      } // end update\r\n\r\n    // Helper functions for collapsing and expanding nodes\r\n\r\n    // Toggle expand / collapse\r\n    // function toggle(d) {\r\n    //   console.log(d.children, d._children)\r\n    //   if (d.children) {\r\n    //     d._children = d.children;\r\n    //     d.children = null;\r\n    //   } else if (d._children) {\r\n    //     d.children = d._children;\r\n    //     d._children = null;\r\n    //   }\r\n    // }\r\n\r\n\r\n    function toggleTree(d) {\r\n      if (d.children) {\r\n        collapseTree(d);\r\n      } else {\r\n        expandTree(d);\r\n      }\r\n    }\r\n\r\n    function expand(d) {\r\n      if (d._children) {\r\n        d.children = d._children;\r\n        d._children = null;\r\n      }\r\n    }\r\n\r\n    // expand all children, whether expanded or collapsed\r\n    function expandTree(d) {\r\n      if (d._children) {\r\n        d.children = d._children;\r\n        d._children = null;\r\n      }\r\n      if (d.children) {\r\n        d.children.forEach(expandTree);\r\n      }\r\n    }\r\n\r\n    function collapse(d) {\r\n      if (d.children) {\r\n        d._children = d.children;\r\n        d.children = null;\r\n      }\r\n    }\r\n\r\n  //   // collapse all children\r\n    function collapseTree(d) {\r\n      if (d.children) {\r\n        d._children = d.children;\r\n        d.children = null;\r\n      }\r\n      if (d._children) {\r\n        d._children.forEach(collapseTree);\r\n      }\r\n    }\r\n\r\n  //   // expand one level of tree\r\n    function expand1Level(d) {\r\n      var q = [d]; // non-recursive\r\n      var cn;\r\n      var done = null;\r\n      while (q.length > 0) {\r\n        cn = q.shift();\r\n        if (done !== null && done < cn.depth) { return; }\r\n        if (cn._children) {\r\n          done = cn.depth;\r\n          cn.children = cn._children;\r\n          cn._children = null;\r\n          cn.children.forEach(collapse);\r\n        }\r\n        if (cn.children) { q = q.concat(cn.children); }\r\n      }\r\n      // no nodes to open\r\n    }\r\n\r\n  //   // highlight selected node\r\n    function selectNode(node) {\r\n      if (curNode) {\r\n        delete curNode.selected;\r\n      }\r\n      curNode = node;\r\n      curNode.selected = true;\r\n      curPath = []; // filled in by fullpath\r\n      // console.log(\"curnode\", curNode)\r\n      d3.select('#selection').html(fullpath(node));\r\n    }\r\n\r\n  //   // for displaying full path of node in tree\r\n    function fullpath(d, idx) {\r\n      idx = idx || 0;\r\n      curPath.push(d);\r\n      return (\r\n        d.parent ? fullpath(d.parent, curPath.length) : '') +\r\n        '/<span class=\"nodepath'+(d.data.name === root.data.name ? ' highlight' : '')+\r\n        '\" data-sel=\"'+ idx +'\" title=\"Set Root to '+ d.data.name +'\">' +\r\n        d.name + '</span>';\r\n    }\r\n\r\n  //   // d3 event handlers\r\n\r\n    function switchroot(event) {\r\n      event.preventDefault();\r\n      var pathelms = document.querySelectorAll('#selection .nodepath');\r\n      for (var i = 0; i < pathelms.length; i++) {\r\n        pathelms[i].classList.remove('highlight');\r\n      }\r\n      var target = event.target;\r\n      var node = curPath[+target.dataset.sel];\r\n      if (event.shiftKey) {\r\n        if (curNode !== node) {\r\n          selectNode(node);\r\n        }\r\n      } else {\r\n        root = node;\r\n        target.classList.add('highlight');\r\n      }\r\n      update(root, true);\r\n    }\r\n\r\n    // function click(event, d) { // select node\r\n    //   console.log(\"click\", d)\r\n    //   if (event.defaultPrevented || d === curNode) { return; } // suppressed\r\n    //   event.preventDefault();\r\n    //   selectNode(d);\r\n    //   update(d, true);\r\n    // //   update(d, true);\r\n    // }\r\n\r\n    function dblclick(event, d) {  // Toggle children of node\r\n      if (event.defaultPrevented) { return; } // click suppressed\r\n      event.preventDefault();\r\n      // if (event.shiftKey) {\r\n      //   console.log(\"shift\")\r\n      //   expand1Level(d); // expand node by one level\r\n      // } else {\r\n      //   console.log(\"trigger\")\r\n      //   toggle(d);\r\n      // }\r\n      // toggle(d);\r\n      // expand1Level(d);\r\n      if(flag === 0){\r\n        flag = 1;\r\n        update(d, true);\r\n        update(d, true);\r\n\r\n      }else{\r\n        flag = 0;\r\n        update(root, true);\r\n        update(root, true);\r\n\r\n      }\r\n\r\n      // update(d, true);\r\n    }\r\n\r\n    var startposX, startposY; // initial position on mouse button down for pan\r\n\r\n\r\n    // keep rotation between 0 and 360\r\n    function limitR(r) {\r\n      return (r + 360) % 360;\r\n    }\r\n\r\n  //   // limit size of text and nodes as scale increases\r\n    function reduceZ() {\r\n      return Math.pow(1.1, -curZ);\r\n    }\r\n\r\n  //   // set view with no animation\r\n    function setview() {\r\n        svgGroup.attr('transform', 'rotate(' + curR + ' ' + curX + ' ' + curY +\r\n            ')translate(' + curX + ' ' + curY + ')scale(' + curZ + ')');\r\n        svgGroup.selectAll('text')\r\n            .attr('text-anchor', function(d) {\r\n                return (d.x + curR) % 360 <= 180 ? 'start' : 'end';\r\n            })\r\n            .attr('transform', function(d) {\r\n                return ((d.x + curR) % 360 <= 180 ?\r\n                    'translate(8)scale(' :\r\n                    'rotate(180)translate(-8)scale('\r\n                  ) + reduceZ() +')';\r\n            });\r\n        svgGroup.selectAll('circle').attr('r', NODE_DIAMETER * reduceZ());\r\n    }\r\n\r\n    var color2 = d3.scaleOrdinal().range(d3.schemeCategory10)\r\n    var margin = {top: 50, right: 50, bottom: 50, left: 50},\r\n    width = Math.min(300, window.innerWidth - 10) - margin.left - margin.right\r\n    height = Math.min(width, window.innerHeight - margin.top - margin.bottom - 20)\r\n    var labels = ['rating', 'price', 'sweetness', 'intensity', 'tannin', 'acidity']\r\n\r\n    var radarChartOptions2 = {\r\n        w: width,\r\n        h: height,\r\n        margin: margin,\r\n        maxValue: 0.5,\r\n        levels: 1,\r\n        roundStrokes: true,\r\n        color: color2,\r\n        labels: labels\r\n    };\r\n\r\n\r\n\r\n\r\n        let new_data = []\r\n        const parseF = str => (str ? parseFloat(str) : 0)\r\n        const parseS = str => (str ? str : 'Unknown')\r\n\r\n        // build scales\r\n        let range = 0.03\r\n        let scales = {}\r\n        labels.map(l => {\r\n            let sorted = dataset.map(d => d[l])\r\n                .filter(v => v)\r\n                .sort((a, b) => a-b)\r\n\r\n            scales[l] = d3.scaleLinear()\r\n            // .domain([d3.min(dataset, (d) => parseF(d[l])),\r\n            // \t\td3.max(dataset, (d) => parseF(d[l]))])\r\n                .domain([d3.min(dataset, (d) => parseF(sorted[Math.floor(sorted.length*range)])),\r\n                    d3.max(dataset, (d) => parseF(sorted[Math.floor(sorted.length*(1-range))]))])\r\n                .range([0.1, 1])\r\n        })\r\n\r\n\r\n\r\n        function click(event, d){\r\n            var name = d.id.substring(d.id.lastIndexOf(\"\\\\\") + 1);\r\n            if(d.children){\r\n                return;\r\n            }\r\n            // console.log(dataset[0]['name'])\r\n            var target;\r\n            for(var i in dataset){\r\n                if(dataset[i]['name'] == name){\r\n                    target = i;\r\n                    break;\r\n                }\r\n            }\r\n            // console.log(target)\r\n            if (new_data.length < 6) {\r\n                let d = dataset[target]\r\n                // console.log(d)\r\n                new_data.push(labels.map(l => {\r\n                    let lowbound = 0, upbound = 1.1\r\n                    let value = scales[l](parseF(d[l]))\r\n                    value = Math.min(Math.max(value, lowbound), upbound)\r\n                    return {axis:l, value:value, actValue:parseS(d[l])}\r\n                }))\r\n                CompareRadar(\".radarChart\", new_data, radarChartOptions2, new_data);\r\n            }\r\n            return new_data\r\n        }\r\n\r\n                // CompareRadar(\".compareRadar\", new_data, radarChartOptions2, new_data);\r\n\r\n\r\n            })\r\n\r\n\r\n  });\r\n\r\n\r\n}\r\n","import React from \"react\";\r\nimport * as d3 from 'd3';\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport dataset from \"../../data/wine_name_grapes.csv\";\r\nimport dataset_tree from \"../../data/tree.csv\";\r\nimport dataset_radar from '../../data/wine_radar.csv'\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport '../../css/radialTree.css'\r\nimport drawGrapeChart from './grape'\r\nimport drawRadialChart from './radial'\r\nimport {colorScale} from '../utils/constant'\r\nimport styleRadar from './radar_style'\r\n\r\nvar margin = {top: 50, right: 50, bottom: 50, left: 50},\r\n    width = Math.min(300, window.innerWidth - 10) - margin.left - margin.right,\r\n    height = Math.min(width, window.innerHeight - margin.top - margin.bottom - 20);\r\n\r\n\r\nvar labels = ['rating', 'price', 'sweetness', 'intensity', 'tannin', 'acidity']\r\nvar color = d3.scaleOrdinal().range(['#6a111c'])\r\n\r\nvar radarChartOptions = {\r\n    w: width,\r\n    h: height,\r\n    margin: margin,\r\n    maxValue: 0.5,\r\n    levels: 1,\r\n    roundStrokes: true,\r\n    color: color,\r\n    labels: labels\r\n};\r\n\r\nexport default class RadialTree extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        drawGrapeChart(\".drawGrapeChart\", dataset)\r\n        drawRadialChart(\".drawRadialChart\", dataset_tree, dataset_radar, \"Wine\")\r\n\r\n        function drawGrapeChart(id, csvpath){\r\n            d3.csv(csvpath).then((data) => {\r\n                d3.csv(dataset_radar).then((dataset) => {\r\n\r\n                // const svg = d3.select('#svg');\r\n                // const width = +svg.attr('width');\r\n                // const height = +svg.attr('height');\r\n                const width = 900;\r\n                const height = 800;\r\n                const svg = d3.select(id).append(\"svg\")\r\n                            .attr('width', width)\r\n                            .attr(\"height\", height)\r\n\r\n                const outerRadius = width * 0.45;\r\n                const innerRadius = outerRadius - 150;\r\n\r\n                const indexByName = new Map;\r\n                const nameByIndex = new Map;\r\n                const matrix = [];\r\n                const colores = new Map;\r\n                let n = 0;\r\n\r\n                data.forEach(d => {\r\n                    const type = d.type\r\n                    if (!indexByName.has(d = d.name)) {\r\n                        colores.set(n, colorScale[type]);\r\n                        nameByIndex.set(n, d);\r\n                        indexByName.set(d, n++);\r\n                    }\r\n                });\r\n\r\n                const data_size = n;\r\n\r\n                data.forEach(d => {\r\n                    if (!indexByName.has(d = d.grapes)) {\r\n                        colores.set(n, d3.rgb(121, 121, 121));\r\n                        nameByIndex.set(n, d);\r\n                        indexByName.set(d, n++);\r\n                    }\r\n                });\r\n\r\n                data.forEach(d => {\r\n                    const source = indexByName.get(d.name)\r\n                    let row = matrix[source];\r\n                    if (!row) row = matrix[source] = Array.from({length: n}).fill(0);\r\n                    row[indexByName.get(d.grapes)]++;\r\n\r\n                });\r\n\r\n                data.forEach(d => {\r\n                    const source = indexByName.get(d.grapes)\r\n                    let row = matrix[source];\r\n                    if (!row) row = matrix[source] = Array.from({length: n}).fill(0);\r\n                    row[indexByName.get(d.name)]++;\r\n\r\n                });\r\n\r\n\r\n                const chord = d3.chord()\r\n                    .padAngle(.04)\r\n                    .sortSubgroups(d3.descending)\r\n                    .sortChords(d3.descending)\r\n\r\n                const arc = d3.arc()\r\n                    .innerRadius(innerRadius)\r\n                    .outerRadius(innerRadius + 20)\r\n\r\n                const ribbon = d3.ribbon()\r\n                    .radius(innerRadius)\r\n\r\n                const chords = chord(matrix);\r\n\r\n\r\n                const g = svg.append(\"g\")\r\n                    .attr(\"transform\", \"translate(\" + (width -50)/ 2 + \",\" + (height-100) / 2 + \")\")\r\n                    .datum(chord(matrix));\r\n\r\n                const group = g.append(\"g\")\r\n                    .selectAll(\"g\")\r\n                    .data(chords.groups)\r\n                    .join(\"g\");\r\n\r\n                group.append(\"path\")\r\n                    .attr(\"fill\", d => d3.rgb(colores.get(d.index)).darker())\r\n                    .attr(\"stroke\", d => d3.rgb(colores.get(d.index)).darker())\r\n                    .attr(\"d\", arc)\r\n                // .on(\"mouseover\", onMouseOver)\r\n                // .on(\"mouseout\", onMouseOut);\r\n\r\n                group.append(\"text\")\r\n                    .each(d => { d.angle = (d.startAngle + d.endAngle) / 2; })\r\n                    .attr(\"dy\", \".35em\")\r\n                    .attr(\"transform\", d => `\r\n              rotate(${(d.angle * 180 / Math.PI - 90)})\r\n              translate(${innerRadius + 26})\r\n              ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\r\n            `)\r\n                    .attr(\"font-size\", 8)\r\n                    .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\r\n                    .text(d => {if(d.index<data_size) return nameByIndex.get(d.index)})\r\n                    .attr(\"fill\", \"#8c559b\")\r\n                    .on(\"mouseover\", (event, d) => onMouseOver(d))\r\n                    .on(\"mouseout\", (event, d) => onMouseOut(d))\r\n                    .append(\"tspan\")\r\n                    .attr(\"fill\", \"#2b4c2a\")\r\n                    .text(d => {if(d.index>=data_size) return nameByIndex.get(d.index)})\r\n                    .on(\"mouseover\", (event, d) => onMouseOver(d))\r\n                    .on(\"mouseout\", (event, d) => onMouseOut(d));\r\n\r\n\r\n                function onMouseOver(selected) {\r\n                    // console.log(nameByIndex.get(selected.index))\r\n                    key_filter(nameByIndex.get(selected.index))\r\n                    if(selected.index>=data_size){\r\n                        drawRadialChart(\".drawRadialChart\", dataset_tree, dataset_radar, \"Wine\")\r\n                    }\r\n                    else{\r\n                        drawRadialChart(\".drawRadialChart\", dataset_tree, dataset_radar, nameByIndex.get(selected.index))\r\n                    }\r\n                    var target_index = []\r\n                    for (var i = 0; i < matrix[selected.index].length; i++) {\r\n                        if (matrix[selected.index][i] === 1)\r\n                            target_index.push(i)\r\n                    }\r\n                    group\r\n                        .filter(function (d) {\r\n                            var flag = true\r\n                            for (i in target_index) {\r\n                                if (d.index === target_index[i])\r\n                                    flag = false\r\n                            }\r\n                            return d.index !== selected.index && flag\r\n                        })\r\n                        .style(\"opacity\", 0.2);\r\n\r\n                    g.selectAll(\".chord\")\r\n                        .filter(d => (d.source.index !== selected.index && d.target.index !== selected.index))\r\n                        .style(\"opacity\", 0.1);\r\n                }\r\n\r\n                function onMouseOut() {\r\n                    group.style(\"opacity\", 1);\r\n                    g.selectAll(\".chord\")\r\n                        .style(\"opacity\", 1);\r\n                }\r\n\r\n                g.append(\"g\")\r\n                    .attr(\"fill-opacity\", 0.85)\r\n                    .selectAll(\"path\")\r\n                    .data(chords)\r\n                    .join(\"path\")\r\n                    .attr(\"class\", \"chord\")\r\n                    .attr(\"stroke\", d => d3.rgb(colores.get(d.source.index)))\r\n                    .attr(\"fill\", d => colores.get(d.source.index))\r\n                    .attr(\"d\", ribbon)\r\n                    // .on(\"mouseover\", (event, d) => onMouseOver(d))\r\n                    .on(\"mouseover\", (event, d) => onMouseOver(d.source))\r\n                    .on(\"mouseout\", (event, d) => onMouseOut(d.source));\r\n\r\n\r\n                var svgLegned = svg.append(\"g\")\r\n                    .attr(\"transform\", \"translate(800,550)\");\r\n\r\n                var keys = [];\r\n                for (const key in colorScale) {\r\n                    keys.push(key);\r\n                }\r\n\r\n                var legend = svgLegned.selectAll('g')\r\n                    .data(keys)\r\n                    .enter().append('g')\r\n                    .attr(\"class\", \"legends\")\r\n                    .attr(\"transform\", function (d, i) {\r\n                        {\r\n                            return \"translate(0,\" + i * 20 + \")\"\r\n                        }\r\n                    })\r\n\r\n                legend.append('rect')\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", 0)\r\n                    .attr(\"width\", 10)\r\n                    .attr(\"height\", 10)\r\n                    .style(\"fill\", function (d, i) {\r\n                        return colorScale[d]\r\n                    })\r\n\r\n                legend.append('text')\r\n                    .attr(\"x\", 20)\r\n                    .attr(\"y\", 5)\r\n                    .attr(\"dy\", \".35em\")\r\n                    .text(function (d, i) {\r\n                        return d\r\n                    })\r\n                    .attr(\"class\", \"textselected\")\r\n                    .style(\"text-anchor\", \"start\")\r\n                    .style(\"font-size\", 10)\r\n\r\n\r\n\r\n\r\n        // d3.csv(dataset_radar)\r\n        // .then((dataset) => {\r\n            let count = key => dataset.filter(d => d.style_varietal_name === key).length\r\n            // console.log(count('Red'))\r\n            var key_list = dataset\r\n                .map(d => d.style_name)\r\n                .filter(d => d)\r\n                .filter((d,i,self) => (self.indexOf(d) === i))\r\n                .filter(d => count(d) >= 10)\r\n            key_list = Array.from(new Set(key_list))\r\n\r\n            var select = d3.select('#select')\r\n                .attr('class','select')\r\n                .on('change', e => {\r\n                    console.log(d3.select('select').property('value'))\r\n                    key_filter(d3.select('select').property('value'))\r\n                })\r\n            var options = select\r\n                .selectAll('option')\r\n                .data(key_list).enter()\r\n                .append('option')\r\n                .text(function (d) {return d;});\r\n\r\n\r\n            let new_data = []\r\n            const parseF = str => (str ? parseFloat(str) : 0)\r\n            const parseS = str => (str ? str : 'Unknown')\r\n\r\n            // filter entry with empty value\r\n            let key=['style_name', 'White']\r\n            const sum = (a, b) => a+b\r\n            const valid = d => (labels.map(l => (d[l] ? 1 : 0)).reduce(sum, 0) >= labels.length)\r\n\r\n            // build scales\r\n            let range = 0.03\r\n            let scales = {}\r\n            labels.map(l => {\r\n                let sorted = dataset.map(d => d[l])\r\n                    .filter(v => v)\r\n                    .sort((a, b) => a-b)\r\n\r\n                scales[l] = d3.scaleLinear()\r\n                // .domain([d3.min(dataset, (d) => parseF(d[l])),\r\n                // \t\td3.max(dataset, (d) => parseF(d[l]))])\r\n                    .domain([d3.min(dataset, (d) => parseF(sorted[Math.floor(sorted.length*range)])),\r\n                        d3.max(dataset, (d) => parseF(sorted[Math.floor(sorted.length*(1-range))]))])\r\n                    .range([0.1, 1])\r\n            })\r\n\r\n\r\n            function key_filter(key) {\r\n                d3.select('#count').text(`Count: ${count(key)}`)\r\n\r\n                let new_data = []\r\n                let filtered = dataset\r\n                // .filter(d => valid(d))\r\n                    .filter(d => (d['style_name'] === key))\r\n\r\n                filtered.forEach((d,i) => {\r\n                    new_data.push(labels.map(l => {\r\n                        let lowbound = 0, upbound = 1.1\r\n                        let value = scales[l](parseF(d[l]))\r\n                        value = Math.min(Math.max(value, lowbound), upbound)\r\n                        return {axis:l, value:value, actValue:parseS(d[l])}\r\n                    }))\r\n                })\r\n                styleRadar(\".radarChart\", new_data, radarChartOptions);\r\n            }\r\n            key_filter('Red')\r\n\r\n        });\r\n    })\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"radialContainer\">\r\n                <Grid spacing={0} container>\r\n                    <Grid md={6} xs={8} item>\r\n                        <div className=\"drawGrapeChart\"></div>\r\n                    </Grid>\r\n                    <Grid xs={0} item>\r\n                        <Grid\r\n                        spacing={0}\r\n                        direction=\"column\"\r\n                        container\r\n                        >\r\n                        <Grid item>\r\n                            <div className=\"drawRadialChart\"></div>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <div className=\"radarChart\"></div>\r\n                        </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                    {/* <Grid xs={3} item>\r\n                        <Grid\r\n                        spacing={2}\r\n                        direction=\"column\"\r\n                        container\r\n                        >\r\n                        <Grid item>\r\n                            <h1>Intro of this wine style</h1>\r\n                            <p> Text</p>\r\n                        </Grid>\r\n                    </Grid>\r\n                    </Grid> */}\r\n                    </Grid>\r\n        </div>\r\n\r\n        )\r\n    }\r\n}\r\n","/////////////////////////////////////////////////////////\r\n/////////////// The Radar Chart Function ////////////////\r\n/////////////// Written by Nadieh Bremer ////////////////\r\n////////////////// VisualCinnamon.com ///////////////////\r\n/////////// Inspired by the code of alangrafu ///////////\r\n/////////////////////////////////////////////////////////\r\nimport * as d3 from 'd3';\r\n\r\nexport default function styleRadar(id, data, options) {\r\n\tvar cfg = {\r\n\t w: 300,\t\t\t\t//Width of the circle\r\n\t h: 300,\t\t\t\t//Height of the circle\r\n\t margin: {top: 20, right: 20, bottom: 20, left: 20}, //The margins of the SVG\r\n\t levels: 3,\t\t\t\t//How many levels or inner circles should there be drawn\r\n\t maxValue: 0, \t\t\t//What is the value that the biggest circle will represent\r\n\t labelFactor: 1.25, \t//How much farther than the radius of the outer circle should the labels be placed\r\n\t wrapWidth: 60, \t\t//The number of pixels after which a label needs to be given a new line\r\n\t opacityArea: 0.1, \t//The opacity of the area of the blob\r\n\t dotRadius: 4, \t\t\t//The size of the colored circles of each blog\r\n\t opacityCircles: 0.4, \t//The opacity of the circles of each blob\r\n\t strokeWidth: 2, \t\t//The width of the stroke around each blob\r\n\t roundStrokes: false,\t//If true the area and stroke will follow a round path (cardinal-closed)\r\n\t color: d3.schemeCategory10\t//Color function\r\n\t};\r\n\r\n\t//Put all of the options into a variable called cfg\r\n\tif('undefined' !== typeof options){\r\n\t  for(var i in options){\r\n\t\tif('undefined' !== typeof options[i]){ cfg[i] = options[i]; }\r\n\t  }//for i\r\n\t}//if\r\n\r\n\t//If the supplied maxValue is smaller than the actual one, replace by the max in the data\r\n\t// var maxValue = Math.max(cfg.maxValue, d3.max(data, function(i){return d3.max(i.map(function(o){return o.value;}))}));\r\n    var maxValue = 1\r\n\r\n\tvar allAxis = cfg.labels, // (data[0].map(function(i, j){return i.axis})),\t//Names of each axis\r\n\t\ttotal = allAxis.length,\t\t\t\t\t//The number of different axes\r\n\t\tradius = Math.min(cfg.w/2, cfg.h/2), \t//Radius of the outermost circle\r\n\t\tFormat = d3.format('%'),\t\t\t \t//Percentage formatting\r\n\t\tangleSlice = Math.PI * 2 / total;\t\t//The width in radians of each \"slice\"\r\n\r\n\t//Scale for the radius\r\n\tvar rScale = d3.scaleLinear()\r\n\t\t.range([0, radius])\r\n\t\t.domain([0, maxValue]);\r\n\r\n\t/////////////////////////////////////////////////////////\r\n\t//////////// Create the container SVG and g /////////////\r\n\t/////////////////////////////////////////////////////////\r\n\r\n\t//Remove whatever chart with the same id/class was present before\r\n\td3.select(id).select(\"svg\").remove();\r\n\r\n\t//Initiate the radar chart SVG\r\n\tvar svg = d3.select(id).append(\"svg\")\r\n\t\t\t.attr(\"width\",  cfg.w + cfg.margin.left + cfg.margin.right)\r\n\t\t\t.attr(\"height\", cfg.h + cfg.margin.top + cfg.margin.bottom)\r\n\t\t\t.attr(\"class\", \"radar\"+id);\r\n\t//Append a g element\r\n\tvar g = svg.append(\"g\")\r\n\t\t\t.attr(\"transform\", \"translate(\" + (cfg.w/2 + cfg.margin.left) + \",\" + (cfg.h/2 + cfg.margin.top) + \")\");\r\n\r\n\t/////////////////////////////////////////////////////////\r\n\t////////// Glow filter for some extra pizzazz ///////////\r\n\t/////////////////////////////////////////////////////////\r\n\r\n\t//Filter for the outside glow\r\n    var defs = g.append('defs')\r\n\tvar filter = defs.append('filter').attr('id','glow'),\r\n\t\tfeGaussianBlur = filter.append('feGaussianBlur').attr('stdDeviation','2.5').attr('result','coloredBlur'),\r\n\t\tfeMerge = filter.append('feMerge'),\r\n\t\tfeMergeNode_1 = feMerge.append('feMergeNode').attr('in','coloredBlur'),\r\n\t\tfeMergeNode_2 = feMerge.append('feMergeNode').attr('in','SourceGraphic');\r\n\r\n\t/////////////////////////////////////////////////////////\r\n\t/////////////// Draw the Circular grid //////////////////\r\n\t/////////////////////////////////////////////////////////\r\n\r\n\t//Wrapper for the grid & axes\r\n\tvar axisGrid = g.append(\"g\").attr(\"class\", \"axisWrapper\");\r\n\r\n\t//Draw the background circles\r\n\taxisGrid.selectAll(\".levels\")\r\n\t   .data(d3.range(1,(cfg.levels+1)).reverse())\r\n\t   .enter()\r\n\t\t.append(\"circle\")\r\n\t\t.attr(\"class\", \"gridCircle\")\r\n\t\t.attr(\"r\", function(d, i){return radius/cfg.levels*d;})\r\n\t\t.style(\"fill\", \"#CDCDCD\")\r\n\t\t.style(\"stroke\", \"#CDCDCD\")\r\n\t\t.style(\"fill-opacity\", cfg.opacityCircles)\r\n\t\t.style(\"filter\" , \"url(#glow)\");\r\n\r\n\t/////////////////////////////////////////////////////////\r\n\t//////////////////// Draw the axes //////////////////////\r\n\t/////////////////////////////////////////////////////////\r\n\r\n\t//Create the straight lines radiating outward from the center\r\n\tvar axis = axisGrid.selectAll(\".axis\")\r\n\t\t.data(allAxis)\r\n\t\t.enter()\r\n\t\t.append(\"g\")\r\n\t\t.attr(\"class\", \"axis\");\r\n\t//Append the lines\r\n    var axis_len = 0.1\r\n\taxis.append(\"line\")\r\n        .attr(\"x1\", function(d, i){ return rScale(maxValue*(1-axis_len/2)) * Math.cos(angleSlice*i - Math.PI/2); })\r\n        .attr(\"y1\", function(d, i){ return rScale(maxValue*(1-axis_len/2)) * Math.sin(angleSlice*i - Math.PI/2); })\r\n\t\t.attr(\"x2\", function(d, i){ return rScale(maxValue*(1+axis_len/2)) * Math.cos(angleSlice*i - Math.PI/2); })\r\n\t\t.attr(\"y2\", function(d, i){ return rScale(maxValue*(1+axis_len/2)) * Math.sin(angleSlice*i - Math.PI/2); })\r\n\t\t.attr(\"class\", \"line\")\r\n\t\t.style(\"stroke\", \"#CDCDCD\")\r\n\t\t.style(\"stroke-width\", \"2px\")\r\n        .attr(\"x1\", 0)\r\n        .attr(\"y1\", 0)\r\n\t\t.style(\"stroke\", \"white\")\r\n\r\n\r\n\r\n\t//Append the labels at each axis\r\n\taxis.append(\"text\")\r\n\t\t.attr(\"class\", \"legend\")\r\n\t\t.style(\"font-size\", \"11px\")\r\n\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t.attr(\"dy\", \"0.35em\")\r\n\t\t.attr(\"x\", function(d, i){ return rScale(maxValue * cfg.labelFactor) * Math.cos(angleSlice*i - Math.PI/2); })\r\n\t\t.attr(\"y\", function(d, i){ return rScale(maxValue * cfg.labelFactor) * Math.sin(angleSlice*i - Math.PI/2); })\r\n\t\t.text(function(d){return d})\r\n\t\t.call(wrap, cfg.wrapWidth);\r\n\r\n    if (data.length == 0) {\r\n        return ;\r\n    }\r\n\r\n\t/////////////////////////////////////////////////////////\r\n\t///////////// Draw the radar chart blobs ////////////////\r\n\t/////////////////////////////////////////////////////////\r\n\r\n\t//The radial line function\r\n\tvar radarLine = d3.radialLine()\r\n        .curve(d3.curveLinearClosed)\r\n        .radius(d => rScale(d.value))\r\n        .angle((d,i) => i * angleSlice);\r\n\r\n\tif(cfg.roundStrokes) {\r\n\t\tradarLine.curve(d3.curveCardinalClosed)\r\n\t}\r\n\r\n    // data = data.map((d,i) => Object.assign({i:i}, d))\r\n    // console.log(data)\r\n\r\n\t//Create a wrapper for the blobs\r\n\tvar blobWrapper = g.selectAll(\".radarWrapper\")\r\n\t\t.data(data)\r\n\t\t.enter().append(\"g\")\r\n\t\t.attr(\"class\", \"radarWrapper\");\r\n\r\n\t//Append the backgrounds\r\n\tblobWrapper\r\n\t\t.append(\"path\")\r\n\t\t.attr(\"class\", \"radarArea\")\r\n\t\t.attr(\"d\", function(d,i) { return radarLine(d); })\r\n\t\t.style(\"fill\", function(d,i) { return cfg.color(i); })\r\n\t\t.style(\"fill-opacity\", cfg.opacityArea)\r\n\t\t// .on('mouseover', function (d,i){\r\n\t\t// \t//Dim all blobs\r\n\t\t// \td3.selectAll(\".radarArea\")\r\n\t\t// \t\t.transition().duration(200)\r\n\t\t// \t\t.style(\"fill-opacity\", 0.1);\r\n\t\t// \t//Bring back the hovered over blob\r\n\t\t// \td3.select(this)\r\n\t\t// \t\t.transition().duration(200)\r\n\t\t// \t\t.style(\"fill-opacity\", 0.7);\r\n\t\t// })\r\n\t\t// .on('mouseout', function(){\r\n\t\t// \t//Bring back all blobs\r\n\t\t// \td3.selectAll(\".radarArea\")\r\n\t\t// \t\t.transition().duration(200)\r\n\t\t// \t\t.style(\"fill-opacity\", cfg.opacityArea);\r\n\t\t// })\r\n        // .on(\"contextmenu\", function(e,d) {\r\n        //     e.preventDefault();\r\n        //     new_data.splice(new_data.findIndex(_d => _d === d), 1)\r\n        //     RadarChart(\".radarChart\", new_data, options)\r\n        // })\r\n        // .attr(\"mask\", (d, i) => {\r\n        //     return `url(#mask${i})`;\r\n        // })\r\n\r\n\t//Create the outlines\r\n\tblobWrapper.append(\"path\")\r\n\t\t.attr(\"class\", \"radarStroke\")\r\n\t\t.attr(\"d\", function(d,i) { return radarLine(d); })\r\n\t\t// .style(\"stroke-width\", cfg.strokeWidth + \"px\")\r\n\t\t// .style(\"stroke\", function(d,i) { return cfg.color(i); })\r\n\t\t.style(\"fill\", \"none\")\r\n\t\t// .style(\"filter\" , \"url(#glow)\");\r\n\r\n\t//Append the circles\r\n\t// blobWrapper.selectAll(\".radarCircle\")\r\n\t// \t.data(function(d,i) { return d.map(d => [d, i]); })\r\n\t// \t.enter().append(\"circle\")\r\n\t// \t.attr(\"class\", \"radarCircle\")\r\n\t// \t.attr(\"r\", cfg.dotRadius)\r\n\t// \t.attr(\"cx\", function(d,i){ return rScale(d[0].value) * Math.cos(angleSlice*i - Math.PI/2); })\r\n\t// \t.attr(\"cy\", function(d,i){ return rScale(d[0].value) * Math.sin(angleSlice*i - Math.PI/2); })\r\n\t// \t.style(\"fill\", function(d,i) { return cfg.color(d[1]); })\r\n\t// \t// .style(\"fill-opacity\", cfg.opacityArea);\r\n    //     .style(\"fill-opacity\", 1);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t/////////////////////////////////////////////////////////\r\n\t//////// Append invisible circles for tooltip ///////////\r\n\t/////////////////////////////////////////////////////////\r\n\r\n\t// //Wrapper for the invisible circles on top\r\n\t// var blobCircleWrapper = g.selectAll(\".radarCircleWrapper\")\r\n\t// \t.data(data)\r\n\t// \t.enter().append(\"g\")\r\n\t// \t.attr(\"class\", \"radarCircleWrapper\");\r\n\r\n\t// //Append a set of invisible circles on top for the mouseover pop-up\r\n\t// blobCircleWrapper.selectAll(\".radarInvisibleCircle\")\r\n\t// \t.data(function(d,i) { return d; })\r\n\t// \t.enter().append(\"circle\")\r\n    //     // .attr(\"class\", \"radarArea\")\r\n\t// \t.attr(\"class\", \"radarInvisibleCircle\")\r\n\t// \t.attr(\"r\", cfg.dotRadius*1.5)\r\n\t// \t.attr(\"cx\", function(d,i){ return rScale(d.value) * Math.cos(angleSlice*i - Math.PI/2); })\r\n\t// \t.attr(\"cy\", function(d,i){ return rScale(d.value) * Math.sin(angleSlice*i - Math.PI/2); })\r\n\t// \t.style(\"fill\", \"none\")\r\n\t// \t.style(\"pointer-events\", \"all\")\r\n\t// \t.on(\"mouseover\", function(e,d) {\r\n\t// \t\tnewX =  parseFloat(d3.select(this).attr('cx')) - 10;\r\n\t// \t\tnewY =  parseFloat(d3.select(this).attr('cy')) - 10;\r\n\r\n\t// \t\ttooltip\r\n\t// \t\t\t.attr('x', newX)\r\n\t// \t\t\t.attr('y', newY)\r\n\t// \t\t\t.text(d.axis + ':' + String(d.actValue))\r\n\t// \t\t\t.transition().duration(200)\r\n\t// \t\t\t.style('opacity', 1);\r\n\t// \t})\r\n\t// \t.on(\"mouseout\", function(){\r\n\t// \t\ttooltip.transition().duration(200)\r\n\t// \t\t\t.style(\"opacity\", 0);\r\n\t// \t})\r\n\r\n\r\n    // data.forEach(function(d, i){\r\n    //     const mask = defs.append(\"mask\")\r\n    //         .attr(\"id\", `mask${i}`);\r\n\r\n    //     mask.append(\"path\")\r\n    //         // .attr(\"class\", \"radarArea\")\r\n    //         .attr(\"d\", radarLine(d))\r\n    //         .style(\"fill\", 'white')\r\n\r\n    //     d.forEach((d,i) => {\r\n    //         mask.append(\"circle\")\r\n    //         .attr(\"r\", cfg.dotRadius*1.5-2)\r\n    //         .attr(\"cx\", rScale(d.value) * Math.cos(angleSlice*i - Math.PI/2))\r\n    //         .attr(\"cy\", rScale(d.value) * Math.sin(angleSlice*i - Math.PI/2))\r\n    //         .attr(\"fill\", 'black')\r\n    //     })\r\n    // })\r\n\r\n\r\n\t//Set up the small tooltip for when you hover over a circle\r\n\tvar tooltip = g.append(\"text\")\r\n\t\t.attr(\"class\", \"tooltip\")\r\n\t\t.style(\"opacity\", 0);\r\n\r\n\t/////////////////////////////////////////////////////////\r\n\t/////////////////// Helper Function /////////////////////\r\n\t/////////////////////////////////////////////////////////\r\n\r\n\t//Taken from http://bl.ocks.org/mbostock/7555321\r\n\t//Wraps SVG text\r\n\tfunction wrap(text, width) {\r\n\t  text.each(function() {\r\n\t\tvar text = d3.select(this),\r\n\t\t\twords = text.text().split(/\\s+/).reverse(),\r\n\t\t\tword,\r\n\t\t\tline = [],\r\n\t\t\tlineNumber = 0,\r\n\t\t\tlineHeight = 1.4, // ems\r\n\t\t\ty = text.attr(\"y\"),\r\n\t\t\tx = text.attr(\"x\"),\r\n\t\t\tdy = parseFloat(text.attr(\"dy\")),\r\n\t\t\ttspan = text.text(null).append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", dy + \"em\");\r\n\r\n\t\twhile (word = words.pop()) {\r\n\t\t  line.push(word);\r\n\t\t  tspan.text(line.join(\" \"));\r\n\t\t  if (tspan.node().getComputedTextLength() > width) {\r\n\t\t\tline.pop();\r\n\t\t\ttspan.text(line.join(\" \"));\r\n\t\t\tline = [word];\r\n\t\t\ttspan = text.append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\r\n\t\t  }\r\n\t\t}\r\n\t  });\r\n\t}//wrap\r\n\r\n}//RadarChart\r\n","import React, {Component} from \"react\";\nimport * as d3 from \"d3\";\nimport {colorCategory, colorScale} from \"../utils/constant\";\nimport {select} from 'd3-selection'\nimport '../../css/networkGraph.css'\n\nconst food_data = require('../../data/style_food_data');\nconst food_link = require('../../data/style_food_link');\n\nconst scale = d3.scaleOrdinal(d3.schemeCategory10);\nconst color = d => scale(d.group)\n\nconst drag = simulation => {\n\n    function dragstarted(event) {\n        if (!event.active) simulation.alphaTarget(0.3).restart();\n        event.subject.fx = event.subject.x;\n        event.subject.fy = event.subject.y;\n    }\n\n    function dragged(event) {\n        event.subject.fx = event.x;\n        event.subject.fy = event.y;\n    }\n\n    function dragended(event) {\n        if (!event.active) simulation.alphaTarget(0);\n        event.subject.fx = null;\n        event.subject.fy = null;\n    }\n\n    return d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended);\n}\n\nexport default class NetworkGraph extends Component {\n    constructor(props) {\n        super(props)\n        this.createNetwork = this.createNetwork.bind(this)\n        this.state = {'selected': 0, 'refresh': 1}\n    }\n\n    componentDidMount() {\n        if (this.state['refresh'] === 1) this.createNetwork()\n    }\n\n    componentDidUpdate() {\n        if (this.state['refresh'] === 1) this.createNetwork()\n    }\n\n\n    createNetwork() {\n\n        const self = this;\n        const root = this.node;\n        const width = self.props.width;\n        const height = self.props.height;\n        const imageRadius = 20;\n\n        select(root).selectAll('*').remove();\n\n        const links = food_link.map(d => Object.create(d));\n        const nodes = food_data.map(d => Object.create(d));\n\n        const tooltip = d3.select(\"body\")\n            .append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0);\n\n        const simulation = d3.forceSimulation(nodes)\n            .force(\"link\", d3.forceLink(links).id(d => d.id))\n            .force(\"charge\", d3.forceManyBody().strength(d => d.__proto__.group === 'Wine' ? -400 : -200))\n            .force(\"center\", d3.forceCenter(width / 3, height / 2))\n\n        const link = select(root).append(\"g\")\n            .attr(\"stroke\", \"#505050\")\n            .attr(\"stroke-opacity\", 0.5)\n            .selectAll(\"line\")\n            .data(links)\n            .join(\"line\")\n            .attr(\"stroke-width\", d => Math.sqrt(d.count) / 100);\n\n        const gNode = select(root).selectAll('g.node')\n            .data(nodes.filter(d => d.__proto__.group !== 'Wine'))\n            .join('svg:g')\n            .attr('class', 'node');\n\n        const defs = gNode.append('defs');\n        defs.append('pattern')\n            .attr(\"id\", d => \"image\" + d.__proto__.id)\n            .attr(\"width\", 1)\n            .attr(\"height\", 1)\n            .append(\"svg:image\")\n            .attr(\"xlink:href\", d => 'http:' + d.__proto__.image)\n            .attr(\"width\", imageRadius * 2)\n            .attr(\"height\", imageRadius * 2);\n\n        const clickEvent =  d => {\n            const id = d.target.__data__.__proto__.id;\n            if (self.state.selected !== id) {\n                const neighbors = links.reduce((a, b) => {\n                    if (b.__proto__.source === id) a.add(b.__proto__.target);\n                    else if (b.__proto__.target === id) a.add(b.__proto__.source);\n                    return a\n                }, new Set());\n                neighbors.add(id);\n                select(root).selectAll('circle.node').attr('opacity', e => neighbors.has(e.__proto__.id)? (e.__proto__.group === 'Wine' ?1 : 0.9) : 0.3);\n                self.setState({'selected': id, 'refresh': 0});\n            }\n            else {\n                select(root).selectAll('circle.node').attr('opacity', 0.9);\n                self.setState({'selected': null, 'refresh': 0});\n            }\n        };\n\n        const mouseOverEvent = d => {\n            const data = d.target.__data__.__proto__\n            tooltip.transition()\n                .duration(100)\n                .style(\"opacity\", .8);\n            tooltip.html(\"<p>Name: \" + data.name + \"</p> <p> Category: \" +  `${data.group === 'Wine' ? data.type_name : data.group}` + '</p>')\n                .style(\"left\", () => d.pageX + 'px')\n                .style(\"top\", () => d.pageY + 'px');\n        };\n\n        const mouseOutEvent = () => {\n            tooltip.transition()\n                .duration(100)\n                .style(\"opacity\", 0);\n        };\n\n        const mouseMoveEvent = d => {\n            tooltip.style(\"left\", (d.pageX) + \"px\")\n                .style(\"top\", (d.pageY) + \"px\");\n        };\n\n\n        const node = gNode.append('circle')\n            .attr('class', 'node')\n            .attr('r', imageRadius)\n            .attr(\"fill\", color)\n            .attr(\"stroke\", d => colorCategory[d.__proto__.group])\n            .attr(\"stroke-width\", 3)\n            .attr('stroke-opacity', 0.7)\n            .attr('fill', d => `url(#image${d.__proto__.id}`)\n            .attr('opacity', 0.9)\n            .call(drag(simulation))\n            .on('click', clickEvent)\n            .on('mouseover.tooltip', mouseOverEvent)\n            .on(\"mouseout.tooltip\", mouseOutEvent)\n            .on(\"mousemove\", mouseMoveEvent);\n\n\n\n        const wine = select(root).append(\"g\")\n            .attr(\"stroke\", \"#fff\")\n            .attr(\"stroke-width\", 1.5)\n            .selectAll(\"circle\")\n            .data(nodes.filter(d => d.__proto__.group === 'Wine'))\n            .join(\"circle\")\n            .attr('class', 'node')\n            .attr('r', 10)\n            .attr(\"fill\", d => colorScale[d.__proto__.type_name])\n            .call(drag(simulation))\n            .on('click', clickEvent)\n            .on('mouseover.tooltip', mouseOverEvent)\n            .on(\"mouseout.tooltip\", mouseOutEvent)\n            .on(\"mousemove\", mouseMoveEvent);\n\n        // node.append(\"title\")\n        //     .text(d => d.name);\n\n        simulation.on(\"tick\", () => {\n            link\n                .attr(\"x1\", d => d.source.x)\n                .attr(\"y1\", d => d.source.y)\n                .attr(\"x2\", d => d.target.x)\n                .attr(\"y2\", d => d.target.y);\n\n            node\n                .attr(\"cx\", d => d.x)\n                .attr(\"cy\", d => d.y);\n\n            wine\n                .attr(\"cx\", d => d.x)\n                .attr(\"cy\", d => d.y);\n        });\n\n        const wineColor = Object.keys(colorScale).reduce((a, b) => {\n            a.push({\"name\": b, \"color\": colorScale[b]})\n            return a\n        }, []);\n\n\n        const wineLegend = select(root).selectAll('.wine-legend')\n            .data(wineColor)\n            .enter()\n            .append('g')\n            .attr('class', 'wine-legend')\n            .attr('transform', (_, i) => `translate(0, ${i * 20})`)\n        ;\n\n        wineLegend.append('rect')\n            .attr('width', 10)\n            .attr('height', 10)\n            .attr('stroke', 'black')\n            .style('stroke-width', 0.5)\n            .style('fill', d => d.color)\n        ;\n\n        wineLegend.append('text')\n            .attr('x', 15)\n            .attr('y', 8)\n            .attr('font-size', 10)\n            .text(d => d.name)\n        ;\n\n        const foodColor = Object.keys(colorCategory).reduce((a, b) => {\n            a.push({\"name\": b, \"color\": colorCategory[b]})\n            return a\n        }, []);\n\n\n        const foodLegend = select(root).selectAll('.food-legend')\n            .data(foodColor)\n            .enter()\n            .append('g')\n            .attr('class', 'food-legend')\n            .attr('transform', (_, i) => {\n                return `translate(100, ${i * 20 + 8})`\n            })\n        ;\n\n        foodLegend.append('circle')\n            .attr('r', 6)\n            .attr('stroke', d => d.color)\n            .attr('stroke-width', 1.5)\n            .attr('fill', 'none');\n\n        foodLegend.append('text')\n            .attr('x', 15)\n            .attr('y', 2)\n            .attr('font-size', 10)\n            .text(d => d.name)\n        ;\n    }\n\n    render() {\n        return <svg ref={node => this.node = node}\n            // viewBox={[this.props.width / 4, this.props.height / 4, this.props.width / 2, this.props.height / 2]}\n                    width={this.props.width} height={this.props.height}>\n        </svg>\n    }\n}\n","import React from \"react\";\nimport NetworkGraph from './networkGraph'\n\nexport default class FoodNetwork extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    state = {\n        dimensions: {\n            width: 1000,\n            height: 800\n        }\n    };\n\n\n    componentDidMount() {\n        this.setState({\n            dimensions: {\n                width: this.container.offsetWidth,\n                height: this.container.offsetHeight\n            }\n        })\n    }\n\n    renderContent() {\n        const { dimensions } = this.state;\n\n        return (\n            <NetworkGraph width={dimensions.width} height={dimensions.height} />\n        );\n    }\n\n    render() {\n        const { dimensions } = this.state;\n\n        return (\n            <div ref={el => (this.container = el)}>\n                {dimensions && this.renderContent()}\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport Container from '@material-ui/core/Container';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport { Route, MemoryRouter, Switch } from 'react-router';\n\nimport Links from './components/navBar'\nimport WineMap from './components/map/map'\nimport StyleRadar from './components/radar/radar'\nimport RadialTree from './components/chord/radialTree'\nimport FoodNetwork from './components/network/network'\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        backgroundColor: \"rgba(229,230,230,0.53)\"\n    },\n    toolbar: {\n        paddingRight: 24, // keep right padding when drawer closed\n    },\n    toolbarIcon: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        padding: '0 4px',\n        ...theme.mixins.toolbar,\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        backgroundColor:'#722f37'\n    },\n    appBarShift: {\n        marginLeft: drawerWidth,\n        width: `calc(100% - ${drawerWidth}px)`,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    menuButton: {\n        marginRight: 36,\n    },\n    menuButtonHidden: {\n        display: 'none',\n    },\n    title: {\n        flexGrow: 1,\n    },\n    drawerPaper: {\n        position: 'relative',\n        whiteSpace: 'nowrap',\n        width: drawerWidth,\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    drawerPaperClose: {\n        overflowX: 'hidden',\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        width: theme.spacing(7),\n        [theme.breakpoints.up('sm')]: {\n            width: theme.spacing(9),\n        },\n    },\n    appBarSpacer: theme.mixins.toolbar,\n    content: {\n        flexGrow: 1,\n        height: '100vh',\n        overflow: 'auto',\n    },\n    container: {\n        paddingTop: theme.spacing(4),\n        paddingBottom: theme.spacing(4),\n    },\n    paper: {\n        padding: theme.spacing(2),\n        display: 'flex',\n        overflow: 'auto',\n        flexDirection: 'column',\n    },\n    fixedHeight: {\n        height: 240,\n    }\n}));\n\nexport default function App() {\n    const classes = useStyles();\n    const [open, setOpen] = React.useState(true);\n    const handleDrawerOpen = () => {\n        setOpen(true);\n    };\n    const handleDrawerClose = () => {\n        setOpen(false);\n    };\n    const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline />\n            <MemoryRouter initialEntries={['/map']} initialIndex={0}>\n            <AppBar position=\"absolute\" className={clsx(classes.appBar, open && classes.appBarShift)}>\n                <Toolbar className={classes.toolbar}>\n                    <IconButton\n                        edge=\"start\"\n                        color=\"inherit\"\n                        aria-label=\"open drawer\"\n                        onClick={handleDrawerOpen}\n                        className={clsx(classes.menuButton, open && classes.menuButtonHidden)}\n                    >\n                        <MenuIcon />\n                    </IconButton>\n                    <Typography component=\"h1\" variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n                        Wine Expert\n                    </Typography>\n\n                </Toolbar>\n            </AppBar>\n            <Drawer\n                variant=\"permanent\"\n                classes={{\n                    paper: clsx(classes.drawerPaper, !open && classes.drawerPaperClose),\n                }}\n                open={open}\n            >\n                <div className={classes.toolbarIcon}>\n                    <IconButton onClick={handleDrawerClose}>\n                        <ChevronLeftIcon />\n                    </IconButton>\n                </div>\n                <Divider />\n                <Links/>\n            </Drawer>\n            <div className={classes.content}>\n                <Container maxWidth='xl' className={classes.container}>\n                    <div className={classes.appBarSpacer} />\n                <Switch>\n                    <Route path='/map'>\n                        <WineMap/>\n                    </Route>\n                    <Route path='/radar'>\n                        <StyleRadar/>\n                    </Route>\n                    <Route path='/tree'>\n                        <RadialTree/>\n                    </Route>\n                    <Route path='/network'>\n                        <FoodNetwork/>\n                    </Route>\n                </Switch>\n                </Container>\n            </div>\n            </MemoryRouter>\n        </div>\n    );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}